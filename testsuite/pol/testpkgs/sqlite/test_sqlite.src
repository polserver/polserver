use sqlite;

include "testutil";

program setup()
  return 1;
endprogram

exported function test_sqlite_success()
  var res := sqlite_open( "transaction.db3" );
  var actual := TypeOfInt( res );
  if ( actual != OT_SQLITEDB )
    return ret_error( $"Unexpected value from sqlite_open: expected OT_SQLITEDB ({OT_SQLITEDB}), got {actual}" );
  endif
  return 1;
endfunction

exported function test_sqlite_error()
  // error{ errortext = "unable to open database file" }
  var res := sqlite_open( "dir/does/not\\ exist/transaction.db3" );

  if ( res != error )
    return ret_error( $"Unexpected value from sqlite_open: expected error, got {res}" );
  endif
  return 1;
endfunction
