<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="corechanges.xslt" ?>
<!DOCTYPE ESCRIPT SYSTEM "corechanges.dtd">
<ESCRIPT>
  <header>
    <topic>Latest Core Changes</topic>
    <datemodified>01/04/2012</datemodified>
  </header>
  <version name="POL099">
  	<entry>
      <date>01-14-2012</date>
      <author>Turley</author>
      <change type="Changed">UnicodespeechEvent additional Member "tokens" if speech has (speech.mul) Tokens, gives array of spoken TokenIDs
      </change>
      <change type="Added">servspecopt.cfg SeperateSpeechTokens=1/0 default 0 when set RegisterForSpeechEvents() and EnableEvents/DisableEvents behave different
      </change>
      <change type="Added">uo:RegisterForSpeechEvents Flags LISTENPT_HEAR_TOKENS,LISTENPT_NO_SPEECH
      </change>
      <change type="Added">SYSEVENT_TOKEN_SPEECH:=0x4000 and SYSEVENT_TOKEN_GHOST_SPEECH:=0x8000 for uo:EnableEvents/DisableEvents
      </change>
      <change type="Note">if SeperateSpeechTokens is set you can control which events you get,<br/>
        for NPCs you only get speech with tokens if you set SYSEVENT_TOKEN_SPEECH/SYSEVENT_TOKEN_GHOST_SPEECH
        and non Token speech with SYSEVENT_SPEECH,SYSEVENT_GHOST_SPEECH<br/>
        for RegisterForSpeechEvents() you get speech with and without Tokens when setting LISTENPT_HEAR_TOKENS and no speech without Tokens
        setting LISTENPT_NO_SPEECH
      </change>
      <change type="Note">Token and nonToken Eventtype is still the same (SYSEVENT_SPEECH)
      </change>
    </entry>
    <entry>
      <date>01-03-2012</date>
      <author>Turley</author>
      <change type="Changed">major rewrite of primitive operators +,-,*,/,...
        major speedup of +=,-=,...
      </change>
      <change type="Added">finally support for +=,-=,*=,/=,%= with objectmembers, like who.resist_fire_mod+=1
      </change>
      <change type="Note">if member would return UnInit or Error it does nothing
        so its like (only faster and atomic):<br/>
        var temp:=who.resist_fire_mod;<br/>
        if (!(TypeOfInt(temp) in {OT_UNINIT,OT_ERROR}))<br/>
        temp+=1;<br/>
        who.resist_fire_mod:=temp;<br/>
        endif
      </change>
    </entry>
    <entry>
      <date>01-02-2012</date>
      <author>Turley</author>
      <change type="Added">XMLFile/XMLNode.removexmlnode(int value)<br/>
        removes node of given index<br/>
        XMLFile/XMLNode.removexmlnode(XmlNode node)<br/>
        removes given node<br/>
        XmlNode.clonenode()<br/>
        since all NodeObjects get destroyed when the corresponding XmlFileObject is destroyed, use this method to store a node for later use.
      </change>
    </entry>
    <entry>
      <date>12-18-2011</date>
      <author>Nando</author>
      <change type="Changed">internal handling of intrinsic weapons' unload.
      </change>
      <change type="Removed">INTRINSIC property from Weapon template in itemdesc.cfg. An error occurs
        if it's set. Some shards might have forgot to set it, which would cause
        damage to intrinsic wrestling weapon. This is now handled automatically.
      </change>
    </entry>
    <entry>
      <date>12-17-2011</date>
      <author>Nando</author>
      <change type="Changed">boats.cfg entries are now "Name Graphic X Y &lt;Z&gt;", where Z is optional and
        defaults to zero.
      </change>
    </entry>
    <entry>
      <date>12-17-2011</date>
      <author>Tomi</author>
      <change type="Added">Support for hued boats, use the normal .color r/w member to change the hue
        Patch Submitted by Agata
      </change>
    </entry>
    <entry>
      <date>12-14-2011</date>
      <author>Tomi</author>
      <change type="Removed">pol.cfg MaxObjtype limit removed, now it accepts up to 0xFFFFFFFF ( 4294967295 )
        but try to keep it as low as possible, default value still 0x20000
      </change>
      <change type="Changed">objtype vectors changed to maps to only reserve as much memory as there are
        itemdesc entries, not reserving memory for up to 4 billions of objtypes.
      </change>
      <change type="Changed">boats.cfg entries changed from "Name Graphic X Y" to "Name Graphic X Y Z"
        because some of the new boat components requires different Z levels than the boat
        itself.
      </change>
    </entry>
    <entry>
      <date>12-13-2011</date>
      <author>Austin</author>
      <change type="Added">Support for destroy scripts on multis.
      </change>
    </entry>
    <entry>
      <date>12-13-2011</date>
      <author>Tomi</author>
      <change type="Added">Support for HSA boats ( no smooth move yet, but now all boats are usable )
      </change>
      <change type="Changed">boat.cfg to support new entries "Rope", "Wheel", "Hull", "Tiller", "Rudder", "Sails", "Storage", "Weaponslot"<br/>
        there can be more than 1 of each entry<br/>
        the old entries "Tillerman", "Hold", "PortGangplankExtended", "PortGangplankRetracted", "StarboarGangplankExtended",        "StarboardGangplankRetracted" support just 1 entry each or the boat members get broken
      </change>
      <change type="Added">ReadOnly members for boats<br/>
        .components returns an array of ItemRefs of all the components on the boat<br/>
        .hull returns an array of ItemRefs of all the hull components on the boat, or empty array if none.<br/>
        .rope returns an array of ItemRefs of all the rope components on the boat, or empty array if none.<br/>
        .wheel returns an array of ItemRefs of all the wheel components on the boat, or empty array if none.<br/>
        .rudder returns an array of ItemRefs of all the rudder components on the boat, or empty array if none.<br/>
        .tiller returns an array of ItemRefs of all the tiller components on the boat, or empty array if none.<br/>
        .sails returns an array of ItemRefs of all the sails components on the boat, or empty array if none.<br/>
        .storage returns an array of ItemRefs of all the storage components on the boat, or empty array if none.<br/>
        .weaponslot returns an array of ItemRefs of all the weaponslot components on the boat, or empty array if none.<br/>
        Changed extobj.cfg to support new entries for all the new boat component types and changed the default value of all entries.<br/>
        extobj.cfg entries with default values:<br/>
        Tillerman=0x1F010<br/>
        Port_Plank=0x1F011<br/>
        Starboard_Plank=0x1F012<br/>
        Hold=0x1F013<br/>
        Rope=0x1F014<br/>
        Wheel=0x1F015<br/>
        Hull=0x1F016<br/>
        Tiller=0x1F017<br/>
        Rudder=0x1F018<br/>
        Sails=0x1F019<br/>
        Storage=0x1F01A<br/>
        Weaponslot=0x1F01B<br/>
        Wrestling=0x1F020<br/>
        Mount=0x1F021<br/>
        Secure_Trade_Container=0x1FF01<br/>
        Wornitems_Container=0x1FF02<br/>
      </change>
      <change type="Note">extobj entries just let you define the objtypes, all of these still have to be defined in itemdescs for boats to work correctly.
      </change>
    </entry>
    <entry>
      <date>12-05-2011</date>
      <author>Tomi</author>
      <change type="Fixed">Door methods .open() and .close() were working opposite what they should.
      </change>
    </entry>
    <entry>
      <date>12-04-2011</date>
      <author>Tomi</author>
      <change type="Fixed">EA broke the prof.txt with the latest clients adding "Evaluating Intelligence" and "Spirit Speak" with spaces that resulted into skillnumber 0xFF and skillvalue 0
      </change>
      <change type="Added">UO::UpdateItem( item );<br/>
        updates the item to every client in range, good to use for example after returning 1 in some packethook and the item get invisible.
      </change>
    </entry>
    <entry>
      <date>12-03-2011</date>
      <author>Tomi</author>
      <change type="Changed">startlocs.cfg readded default values for MapID ( 0 ) and Cliloc ( 1075072 which is the Yew town information )
        Pol doesnt anymore throw an error if these values are missing.
      </change>
    </entry>
    <entry>
      <date>12-01-2011</date>
      <author>Nando</author>
      <change type="Fixed">Client hanging after having his connection refused on login. I recommend testing
        different ways of having a client disconnected, like acct.disable(), .ban() and others.
      </change>
    </entry>
    <entry>
      <date>12-01-2011</date>
      <author>Tomi</author>
      <change type="Changed">Polcfg setting MaxObjtype now limited to max 0xFFFFFF (16777215)
      </change>
      <change type="Note">Try to keep it as low as possible
      </change>
    </entry>
    <entry>
      <date>12-01-2011</date>
      <author>MuadDib</author>
      <change type="Changed">UoClientGeneral.maxskills changed to unsigned short. Few places in loops with it changed to use same for the loop counter.
      </change>
    </entry>
    <entry>
      <date>11-30-2011</date>
      <author>Tomi</author>
      <change type="Fixed">Old style spellbooks.
      </change>
    </entry>
    <entry>
      <date>11-29-2011</date>
      <author>MuadDib</author>
      <change type="Fixed">Fixed a script breaker caused by inserting new TypeOfInt() constants in the middle of the Enum. Moved SQL Types to end of list.
      </change>
      <change type="Added">Added SQL entries to the Basic.EM since were missing.
      </change>
    </entry>
    <entry>
      <date>11-29-2011</date>
      <author>Tomi</author>
      <change type="Added">Opengraphic itemdesc entry for Doors ( optional parameter, no need to define if you dont want to use the built in methods )
      </change>
      <change type="Changed">how built in .open() .close() and .toggle() methods works. The now read the graphic what to open to from itemdesc instead of just checking with &amp; 0x1.
        this makes those methods works for new doors too and not only T2A era doors.
      </change>
      <change type="Changed">basic::CChrz( intarray ) to basic::CChrz( intarray, break_at_first_null := 0 );<br/>
        if the break_at_first_null parameter is 0 it uses the old behaviour to just skip the nulls and still convert everything<br/>
        if the break_at_first_null parameter is set to 1 it stops the conversion to string at the first null it finds.
      </change>
      <change type="Changed">All Write(ctBeu16( calls for graphics and colors to use WriteFlipped, this seems to have fixed the assertion errors that occured with removal of the color_ext and graphic_ext
      </change>
      <change type="Changed">Pol throws now an error if some location is missing the MapID or Cliloc Definition in startloc.cfg ( New clients crashed when some were missing )
        Removed the defualt values 0 for MapID and Cliloc ( for older clients it doesnt matter what the values are but clients &gt;= 7.0.13.0 needs them )
      </change>
    </entry>
    <entry>
      <date>11-28-2011</date>
      <author>MuadDib</author>
      <change type="Removed">UObject-&gt;Color_Ext : Removed, and when used is replaced with ctBEu16() calls. This includes read/write of /data files.
      </change>
      <change type="Removed">Last of any UOX references for imports. Most was all commented, a few empty refences was also left. All now removed completely.
      </change>
    </entry>
    <entry>
      <date>11-27-2011</date>
      <author>MuadDib</author>
      <change type="Removed">UObject-&gt;Graphic_Ext : Removed, and when used is replaced with ctBEu16() calls. This includes read/write of /data files.
      </change>
      <change type="Note">UObject-&gt;Serial_Ext will not be removed as previously considered, due to the orphan system making primary use of this.
      </change>
    </entry>
    <entry>
      <date>11-27-2011</date>
      <author>Nando</author>
      <change type="Fixed">corrected memory leak in cfgfile::GetConfigStringDictionary(...)
      </change>
    </entry>
    <entry>
      <date>11-26-2011</date>
      <author>Tomi</author>
      <change type="Changed">CascZ( str ) to CascZ( str, nullterm := 0 )<br/>
        if nullterm 1 it adds the terminating 0 in the end of array.
      </change>
      <change type="Note">Recompile of scripts needed.
      </change>
    </entry>
    <entry>
      <date>11-24-2011</date>
      <author>Tomi</author>
      <change type="Added">Support for Mysticism and BardMasteries spell books<br/>
        Mysticism Spell ID's 678 -&gt; 693 and BardMasteries spell ID's 701+
      </change>
    </entry>
    <entry>
      <date>11-23-2011</date>
      <author>Tomi</author>
      <change type="Added">can_insert and on_insert scripts for Tradewindows
      </change>
    </entry>
    <entry>
      <date>11-22-2011</date>
      <author>Kevin</author>
      <change type="Added">pol/sqlscrobj.cpp pol/sqlscrobj.h
      </change>
      <change type="Changed">pol/module/sqlmod.cpp pol/module/sqlmod.h<br/>
        Add preliminary MySQL database support.<br/>
        New eScript objects: BSQLConnection, BSQLResultSet, BSQLRow<br/>
        Added several new sql module functions:<br/>
        mysql_connect(host,username,password);<br/>
        mysql_query(connection,query);<br/>
        mysql_fetch_row(result);<br/>
        mysql_affected_rows(result);<br/>
        mysql_num_fields(result);<br/>
        mysql_num_rows(result);<br/>
        mysql_select_db(connection,database);<br/>
        mysql_field_name(result,column_index);<br/>
        mysql_free_result(result);<br/>
        mysql_close(connection);<br/>
        In order to build with MySQL support, define the HAVE_MYSQL preprocessor directive in your build configuration.<br/>
        You must have the MySQL headers and libraries installed.<br/>
        Only really tested with dynamically linking mysql libraries on Linux.
      </change>
      <change type="Added">pol/network/auxclient.h
      </change>
      <change type="Changed">pol/network/auxclient.cpp pol/module/osmod.cpp pol/module/osmod.h clib/socketsvc.cpp clib/socketsvc.h<br/>
        Moved AuxClient-related classes to its own header file (shared between auxclient.cpp and osmod.cpp)<br/>
        Implemented os::OpenConnection() to create outgoing TCP/IP connections.
      </change>
      <change type="Changed">runecl/runecl.cpp<br/>
        Added the sql module to runecl to allow quick testing
      </change>
      <change type="Changed">pol/uoscrobj.cpp pol/mobile/charactr.cpp pol/mobile/character.h bscript/parser.cpp bscript/objmembers.h<br/>
        Added read/write property "mountedsteps" for mobiles. Represents number of steps taken while character was mounted.
      </change>
      <change type="Changed">bscript/parser.cpp<br/>
        Declaring an array only using "{}" will show a compiler warning; please explicitly state 'array', 'struct', or 'dictionary'
      </change>
      <change type="Changed">pol/pol.cpp<br/>
        If using Linux, remove pol.pid on shutdown of pol.
      </change>
      <change type="Changed">pol/uoexec.h pol/scrsched.cpp<br/>
        Added script option "AUXSVC_ASSUME_STRING" which will allow aux service connections to send and receive non-packed strings.
      </change>
      <change type="Changed">ecompile/ecompile.cpp<br/>
        If using Linux, a slash ("/") cannot be used to define ecompile options to allow support for absolute filenames.
      </change>
      <change type="Changed">bscript/object.cpp bscript/bobject.h<br/>
        Implemented array operation MultiSubscript. Will return a splice of an array, eg:<br/>
        array{"a","b","c","d","e"}[2,4] will return array{"b","c","d"}
      </change>
    </entry>
    <entry>
      <date>11-12-2011</date>
      <author>Tomi</author>
      <change type="Added">Pol/config/extobj.cfg<br/>
        Values it accept now and default values are<br/>
        Tillerman=0xF010<br/>
        Port_Plank=0xF011<br/>
        Starboard_Plank=0xF012<br/>
        Hold=0xF013<br/>
        Wrestling=0xF020<br/>
        Mount=0xF021<br/>
        Secure_Trade_Container=0xFF01<br/>
        Wornitems_Container=0xFF02<br/>
      </change>
      <change type="Note">These values HAVE TO BE &gt; pol.cfg max_tile_id and the same as objtype for them in itemdescs
      </change>
      <change type="Changed">uoconvert now adds to multis 0x1000 to the ID
      </change>
      <change type="Note">boats.cfg uses the same value as multis.cfg and itemdesc graphic entry for multis have to be the same.
        itemdesc entries for multis need to have the entry MultiID for updating multis ( you can find values using UOFiddler )
      </change>
      <change type="Added">UOExpansion HSA server sends now 0x387DF
      </change>
    </entry>
    <entry>
      <date>11-11-2011</date>
      <author>Tomi</author>
      <change type="Changed">Objtypes are now from 2 up to max_objtype from pol.cfg
      </change>
      <change type="Note">if objtypes &lt;= pol.cfg max_tile_id and no graphic defined in itemdesc Pol uses objtype as graphic.
        Multis and custom items should all be moved to &gt; pol.cfg max_tile_id
      </change>
      <change type="Added">support for new 0xA9 packet for clients &gt;= 7.0.13.0
      </change>
      <change type="Changed">startloc.cfg now have Cliloc and MapID entry for every startlocation ( default values 0 )<br/>
        Example:<br/>
        StartingLocation Yew<br/>
        {<br/>
        City		Yew<br/>
        Description	Town Center<br/>
        Coordinate	535,992,0<br/>
        MapID		0<br/>
        Cliloc		1075072<br/>
        }<br/>
      </change>
      <change type="Note">MapID is the same number as in mapX.mul files<br/>
        Cliloc values are the description of the start locations<br/>
        Newest clients has max stats during char creation 90
      </change>
    </entry>
    <entry>
      <date>11-06-2011</date>
      <author>Tomi</author>
      <change type="Added">pol.cfg setting MaxObjtype &lt;default 0x20000&gt;
      </change>
      <change type="Note">the value can only be any value between 0x20000 and 0xFFFFFFFF
      </change>
    </entry>
    <entry>
      <date>10-26-2011</date>
      <author>Tomi</author>
      <change type="Added">support for clients &gt;= 7.0.16.0 ( 2D ) char create packet 0xF8<br/>
        Enchanced clients still use packet 0x8D
      </change>
    </entry>
    <entry>
      <date>10-15-2011</date>
      <author>Austin</author>
      <change type="Added">.doubleclickrange for items (read only).
      </change>
    </entry>
    <entry>
      <date>09-03-2011</date>
      <author>Turley</author>
      <change type="Added">DestroyMulti(house) returns error "House currently being customized."
      </change>
      <change type="Added">house.cancelediting(chr, drop_changes) will stop editing mode.<br/>
        drop_changes 1/0 if true drops all non committed changes<br/>
        Errors: "House is not custom","House is currently not been edited","Character is not editing this house"
      </change>
      <change type="Added">Syshook CloseCustomHouse(mobile, house)<br/>
        called after client quits editing, or when house.cancelediting() is called<br/>
        return value is ignored
      </change>
      <change type="Added">servspecopt.cfg<br/>
        "SpeedHack_MountRunDelay"  default 80 ms<br/>
        "SpeedHack_MountWalkDelay" default 180 ms<br/>
        "SpeedHack_FootRunDelay"   default 180 ms<br/>
        "SpeedHack_FootWalkDelay"  default 380 ms<br/>
        Change them on your own risk
      </change>
    </entry>
    <entry>
      <date>08-08-2011</date>
      <author>Austin</author>
      <change type="Added">servspecopt.cfg flag "ScriptedMerchantHandlers" default is 0 which results in no change in behavior.
        If enabled, the below change will come into effect:
      </change>
      <change type="Changed">When a player buys something from a merchant the core will not longer handle taking gold from the player, and moving items to the players pack.<br/>
        When the event for EVID_MERCHANT_SOLD and EVID_MERCHANT_BOUGHT is sent it will be a struct containing the following struct:<br/>
        struct.type = EVID_MERCHANT_SOLD or EVID_MERCHANT_BOUGHT<br/>
        struct.source = player buying<br/>
        struct.shoppinglist = array( struct.item, struct.amount )<br/>
        The shopping list items will still be items in the merchant's container.<br/>
        It is up to the script to split the items from the stacks there and move them to the player's pack.<br/>
        It is also up to the script to handle gold checks and consumption.
      </change>
      <change type="Added">item.SplitStackInto(container, amount)<br/>
        Will split the item into 2 stacks. Returns a reference to the new stack made from item. Places new stack into the container.
      </change>
      <change type="Added">item.SplitStackAt(x, y, z, realm, amount)<br/>
        Will split the item into 2 stacks. Returns a reference to the new stack made from item. Places new stack at the coordinates.
      </change>
    </entry>
    <entry>
      <date>05-19-2011</date>
      <author>Turley</author>
      <change type="Added">CustomHousing Support (beta)<br/>
        officially added uo::SendHousingTool( who, house );
      </change>
      <change type="Added">script call of "scripts/misc/customhousecommit.ecl" on commit (noncritical)<br/>
        params: ( who, house, houseelemarray )<br/>
        houseelem = struct{graphic,xoffset,yoffset,z}<br/>
        to get the real coords from an elem add house.x/y<br/>
        called after client presses the commit button<br/>
        to accept the changes call new method house.acceptcommit(chr,1) or house.acceptcommit(chr,0) to drop the commit<br/>
        main purpose should be calculation of cost (with delta support for later changes),<br/>
        link establishing of houseteleporters (0x181D - 0x1828)<br/>
        and adding a signhanger/sign if you didnt added it during multifoundation buildup<br/>
        Doors and Teleporters are added to house components as normal items without any special treatment<br/>
        so dont forget to add scripts/itemdesc entries
      </change>
      <change type="Added">member multi.house_parts<br/>
        returns array of structs{graphic,xoffset,yoffset,z} or error if not a custom house, or currently been edited
        to get the real coords from an elem add house.x/y
      </change>
      <change type="Added">method multi.addhousepart(graphic,xoffset,yoffset,z) returns true or error
      </change>
      <change type="Added">method multi.erasehousepart(graphic,xoffset,yoffset,z) returns true or error
      </change>
      <change type="Added">members multi.house_editing / who.house_editing returns true if house is currently been edited / who is currently editing
      </change>
      <change type="Note">house.setcustom(1) is needed before SendHousingTool() works
      </change>
      <change type="Note">during editing chr is only allowed to walk inside the house
        all components which are not invisible get removed from component list during edit and added to design
        (not invisible to give the chance to eg protect a house sign from been removed from the editing char)
        any item inside the house will be invisible for the chr
        any other mobiles get moved outside the house
      </change>
      <change type="Note">param houseelemarray in script call is the current list of houseparts,
        multi.house_parts gives you the last stored list
      </change>
      <change type="Note">until no house.acceptcommit() is called and start of commitscript no new SendHousingTool() for this house is allowed
      </change>
    </entry>
    <entry>
      <date>05-04-2011</date>
      <author>Turley</author>
      <change type="Fixed">Questarrow packet
      </change>
    </entry>
    <entry>
      <date>04-30-2011</date>
      <author>Turley</author>
      <change type="Fixed">enter/leave-events for NPCs (OWHorus)
      </change>
      <change type="Fixed">diagonal moves in npc::CanMove() and uo::FindPath() (OWHorus)
      </change>
    </entry>
    <entry>
      <date>04-03-2011</date>
      <author>Turley</author>
      <change type="Added">uotool param checkmultis<br/>
        prints infos about used center item
      </change>
    </entry>
    <entry>
      <date>03-12-2011</date>
      <author>Turley</author>
      <change type="Fixed">npc:SayUC() sends SpeechEvent for do_event==SAY_DOEVENT_ENABLE
      </change>
      <change type="Changed">removed warning "No handler for skill.." and changed sysmsg to "That skill cannot be used directly."
        since most of the time the behaviour is wanted
      </change>
      <change type="Added">basic::TypeOfInt( expr ) + basic.em constants<br/>
        returns like TypeOf() the type of given parameter, but returns instead of a string an integer (see basic.em constants)
        since integer comparison are way faster then string comparison this function should always be used for comparisons
      </change>
    </entry>
    <entry>
      <date>03-10-2011</date>
      <author>Turley</author>
      <change type="Added">pol.cfg AccountDataSave (default -1)<br/>
        Values:<br/>
        -1 : old behaviour, saves accounts.txt immediately after an account change<br/>
        0 : saves only during worldsave (if needed)<br/>
        &gt;0 : saves every X seconds and during worldsave (if needed)
      </change>
    </entry>
    <entry>
      <date>02-15-2011</date>
      <author>Turley</author>
      <change type="Changed">"in" keyword now returns the arrayindex or 0 if no match was found
      </change>
    </entry>
    <entry>
      <date>02-05-2011</date>
      <author>Turley</author>
      <change type="Fixed">no exception will be thrown if region enter/leavescript doesnt exist
      </change>
      <change type="Fixed">windows trayicon
      </change>
    </entry>
    <entry>
      <date>10-22-2010</date>
      <author>Turley</author>
      <change type="Fixed">UOHSA packet changes
      </change>
      <change type="Added">mobile.clienttype / client.clienttype HSA flag 0x200
      </change>
    </entry>
    <entry>
      <date>09-06-2010</date>
      <author>Turley</author>
      <change type="Added">TinyXML based xml reading/writing
      </change>
      <change type="Added">file::OpenXMLFile(filename)
        opens given filename and returns XMLFile object<br/>
        fileaccess.cfg is checked<br/>
        file::CreateXMLFile()<br/>
        creates an empty XMLFile object<br/>
        XMLFile.setxmldeclaration(string version, string encoding, string standalone)<br/>
        sets xmldeclaration eg &lt;?xml version="1.0" encoding="UTF-8" standalone="no" ?&gt;<br/>
        XMLFile.appendxmlnode(string value, struct{attributes})<br/>
        appends Node with name value and given attributes (key=name, value=value)<br/>
        XMLFile.appendxmlcomment(string value)<br/>
        appends Comment<br/>
        XMLFile.removexmlnode(string value)<br/>
        removes first node of given value<br/>
        XMLFile.savexml(string filename)<br/>
        saves to filename<br/>
        fileaccess.cfg is checked<br/>
        XMLFile.xmltostring([string indent])<br/>
        returns the xml file as String with given indent string {default "\t"}<br/>
        XMLFile[string] returns first node of given name<br/>
        XMLFile[integer] returns node of given index (1-based)
      </change>
      <change type="Added">XMLNode object<br/>
        XMLNode.attributes<br/>
        returns XMLAttributes object<br/>
        XMLNode.type<br/>
        returns type string<br/>
        (XMLComment, XMLDeclaration, XMLDocument, XMLElement, XMLText, XMLTypeCount, XMLUnknown)<br/>
        XMLNode.firstxmlchild([string value])<br/>
        returns first child or first child of given name<br/>
        XMLNode.nextxmlsibling([string value])<br/>
        returns next sibling, or next sibling of given name<br/>
        XMLNode.appendxmlnode(string value, struct{attributes})<br/>
        appends Node with name value and given attributes (key=name, value=value)<br/>
        XMLNode.appendxmlcomment(string value)<br/>
        appends Comment<br/>
        XMLNode.setxmlattribute(struct{attributes})<br/>
        sets attributes for node<br/>
        XMLNode.removexmlattribute(string key)<br/>
        removes attribute of given key<br/>
        XMLNode.removexmlnode(string value)<br/>
        removes first node of given value<br/>
        XMLNode.appendxmltext(string text)<br/>
        appends text to node<br/>
        XMLNode[string] returns first node of given name<br/>
        XMLNode[integer] returns node of given index (1-based)
      </change>
      <change type="Added">XMLAttributes object<br/>
        XMLAttributes.propnames()<br/>
        returns Array of all attribute names<br/>
        XMLAttributes[string] returns value of given attribute name
      </change>
      <change type="Added">foreach loop support:<br/>
        XMLFile, XMLNode: iterates over all child Nodes<br/>
        iterator is XMLNode object, "_iterator_iter" is integer index<br/>
        XMlAttributes: iterates over all attributes<br/>
        iterator is a struct with key=attributename, value=attributevalue<br/>
        "_iterator_iter" is integer index
      </change>
      <change type="Note">small examples:<br/>
        one way to read an xml file:<br/>
        &lt;?xml version="1.0" ?&gt;<br/>
        &lt;root&gt;<br/>
        &lt;Hello&gt;World&lt;/Hello&gt;<br/>
        &lt;!--Comment--&gt;<br/>
        &lt;nodetwo i="1" /&gt;<br/>
        &lt;/root&gt;<br/>
        var file:=OpenXMLFile("helloworld.xml");<br/>
        parsenode(file,"");<br/>
        function parsenode(node,i)<br/>
        foreach blubb in node<br/>
        syslog(i+cstr(blubb)+" ["+blubb.type+"] ("+cstr(_blubb_iter)+")");<br/>
        parseattrib(blubb,i+"-");<br/>
        parsenode(blubb,i+" ");<br/>
        endforeach<br/>
        endfunction<br/>
        function parseattrib(node,i)<br/>
        foreach ele in (node.attributes)<br/>
        syslog(i+cstr(ele)+" ("+_ele_iter+")");<br/>
        endforeach<br/>
        endfunction<br/>
        one way how to create such an file:<br/>
        var file:=CreateXMLFile();<br/>
        file.setxmldeclaration("1.0","","");<br/>
        file.appendxmlnode("root");<br/>
        file["root"].appendxmlnode("Hello");<br/>
        file["root"]["Hello"].appendxmltext("World");<br/>
        file["root"].appendxmlcomment("Comment");<br/>
        file["root"].appendxmlnode("nodetwo",struct{i:=1});<br/>
        file.savexml("helloworld.xml");
      </change>
    </entry>
    <entry>
      <date>08-20-2010</date>
      <author>Turley</author>
      <change type="Fixed">util:StrFormatTime() checks if format string is correct and if not returns "Invalid Format String." error
        instead of server crash
      </change>
    </entry>
    <entry>
      <date>08-09-2010</date>
      <author>Turley</author>
      <change type="Fixed">exported function calls a different exported function stops execution (eg repsys functions in same script)
      </change>
    </entry>
    <entry>
      <date>06-22-2010</date>
      <author>Turley</author>
      <change type="Fixed">uo::RestartScript() wakes up old script so it stops immediately
      </change>
    </entry>
    <entry>
      <date>06-19-2010</date>
      <author>Turley</author>
      <change type="Fixed">uo::SendDialogGump SENDDIALOGMENU_FORCE_OLD for 2d 7.x clients (UOKR &amp; UOSA clients ignore the flag)
      </change>
    </entry>
    <entry>
      <date>03-27-2010</date>
      <author>Turley</author>
      <change type="Added">os::Start_Skill_Script( chr, attr_name, script_name := "", param := 0 )<br/>
        starts for given chr and attr_name definied script (overrideable with param script_name)
        param is any UObject given to skill script as second param (first is chr)
        performs the same checks like normal skillusage (death,frozen,skilldelay,...)
        (Tomi)
      </change>
    </entry>
    <entry>
      <date>03-26-2010</date>
      <author>Turley</author>
      <change type="Changed">uo::DisconnectClient() now accepts client or character object (Tomi)
      </change>
    </entry>
    <entry>
      <date>03-24-2010</date>
      <author>Turley</author>
      <change type="Added">ClientRef object<br/>
        pkt.sendpacket() &amp; SendPacket() now accepts client or character<br/>
        r/o members:<br/>
        ip, acctname, clientversion, clientinfo, clienttype, clientver_detail, uo_expansion_client<br/>
        methods:<br/>
        compareversion()<br/>
        used as prelogin param for packethooks instead of old struct (so you can send packets)
      </change>
      <change type="Added">character.client<br/>
        returns ClientRef object or error
      </change>
      <change type="Note">This or next release duplicate members/methods get deleted from chr (except acctname)
      </change>
    </entry>
    <entry>
      <date>03-17-2010</date>
      <author>Turley</author>
      <change type="Fixed">Trim: left&amp;right doesnt return empty string if complete string has to be trimmed
      </change>
    </entry>
    <entry>
      <date>03-12-2010</date>
      <author>Turley</author>
      <change type="Fixed">uoconvert - default value of MaxTileID (0x3FFF)
      </change>
      <change type="Added">uoconvert param {maxtileid=0x3FFF/0x7FFF} (if uodata= param is given pol.cfg never gets read)
      </change>
    </entry>
    <entry>
      <date>02-20-2010</date>
      <author>Turley</author>
      <change type="Changed">ListStaticsInBox,ListObjectsInBox,ListMultisInBox now swap x,y,z values if in wrong order
      </change>
      <change type="Added">uo::DistanceEuclidean(obj1, obj2) &amp; uo::CoordinateDistanceEuclidean(x1, y1, x2, y2)<br/>
        returns the Euclidean distance as double ( sqrt(pow(x1-x2,2)+pow(y1-y2,2)) )
      </change>
    </entry>
    <entry>
      <date>02-18-2010</date>
      <author>Turley</author>
      <change type="Added">(Tomi) Syshook UnHide(mobile)<br/>
        return values 0 stops the char from unhiding and 1 let the core process it.
      </change>
      <change type="Added">(Tomi) "DisableCoreChecks" 0/1 (default 0) to each attribute entry in attribute.cfg<br/>
        if true the core will not check during skill_use ( from skillwindow ) for active skills,
        active spells, frozen, paralyzed or delay<br/>
        if false core will check everything as it does now.
      </change>
      <change type="Changed">Increased Maximum UO SkillID to 57 (default value of uoclient::MaxSkillID)
      </change>
    </entry>
    <entry>
      <date>02-17-2010</date>
      <author>Turley</author>
      <change type="Fixed">direct usage of struct/dictionary initializer in array/dictionary/struct definition<br/>
        eg: var dict:=dictionary; dict["blubb"]:=struct{a:=1};
      </change>
    </entry>
    <entry>
      <date>02-16-2010</date>
      <author>Turley</author>
      <change type="Fixed">StrReplace,SubStrReplace return "Invalid parameter type" instead of crashing if non string object
        is given as to_replace, replace_with
      </change>
      <change type="Fixed">Several small memoryleaks
      </change>
    </entry>
    <entry>
      <date>02-04-2010</date>
      <author>Turley</author>
      <change type="Added">polcfg:DiscardOldEvents 1/0 {default 0}<br/>
        if set instead of discarding new event if queue is full it discards oldest event and adds the new event
      </change>
      <change type="Changed">"Event queue is full.." only prints if polcfg.LogLevel &gt;= 11
      </change>
    </entry>
    <entry>
      <date>02-03-2010</date>
      <author>Turley</author>
      <change type="Added">MethodScript support for mobiles<br/>
        NPC: npcdesc.cfg MethodScript entry<br/>
        Character: uoclient.cfg section "General" MethodScript entry
      </change>
    </entry>
    <entry>
      <date>02-01-2010</date>
      <author>Turley</author>
      <change type="Added">multi create additionally checks for valid realm coord of the corners
      </change>
      <change type="Changed">uotool staticdefrag [britannia] (removed "realm=")
      </change>
      <change type="Added">uotool formatdesc [desc] little helper prints singular &amp; plural form of given desc
      </change>
    </entry>
    <entry>
      <date>01-22-2010</date>
      <author>Turley</author>
      <change type="Added">Speedhack Prevention System
      </change>
      <change type="Added">ssopt::SpeedhackPrevention 0/1 (default 0)
      </change>
      <change type="Added">chr priv "speedhack" disables Speedhack Prevention for chr
      </change>
    </entry>
    <entry>
      <date>01-15-2010</date>
      <author>Turley</author>
      <change type="Added">(Tomi) chr priv "runwhilestealth" you can run while you are in stealth for as many stealthsteps you have
      </change>
      <change type="Added">(Tomi) new npcdesc entry "SaveOnExit" 0/1 ( defaults to 1 )
      </change>
      <change type="Note">this also means that SaveOnExit can be definied in the override_properties struct
      </change>
      <change type="Changed">vitals::ApplyDamage( mobile, damage, userepsys := DAMAGE_USE_REPSYS, send_damage := DAMAGE_USE_DEFAULT )<br/>
        vitals::ApplyRawDamage( character, hits, userepsys := DAMAGE_USE_REPSYS, send_damage := DAMAGE_USE_DEFAULT )<br/>
        const DAMAGE_NO_SHOW := 0;<br/>
        const DAMAGE_SHOW := 1;<br/>
        const DAMAGE_USE_DEFAULT := 2;<br/>
        DAMAGE_USE_DEFAULT uses the SendDamagePacket setting from combat.cfg (Tomi)
      </change>
      <change type="Added">uo::SendOverallSeason( season_id, playsound := 1 )<br/>
        Used to send the Season packet 0xBC to all clients logged on.<br/>
        This function doesnt resend the lightlevel or weather after it sends season, that has to be done by scripts.<br/>
        chr.setseason( season_id, playsound )<br/>
        Used to send the Season packet 0xBC to a single character.<br/>
        This method doesnt resend the lightlevel or weather after it sends season, that has to be done by scripts.
        (Tomi)
      </change>
      <change type="Changed">(Tomi) uo::SpeakPowerWords( who, spellid, font := _DEFAULT_TEXT_FONT, color := _DEFAULT_TEXT_COLOR)<br/>
        font, color like every speech function
      </change>
    </entry>
    <entry>
      <date>01-14-2010</date>
      <author>Turley</author>
      <change type="Fixed">(Arkham) ip byteorder for gameserverlist if hostname is given
      </change>
      <change type="Changed">(Tomi) gargoyle char create equips 0x1F03 robe
      </change>
      <change type="Added">(Tomi) ssopt.NewbieStartingEquipment 1/0 (default 1) to determine if equipped items
        created during the character creation should be newbied or not.
      </change>
      <change type="Changed">misc/oncreate.src added third param profession<br/>
        some clients doesnt send skillvalues if profession is given now core doesnt stop char creation,
        based on third param you can set the skillvalues in oncreate
      </change>
      <change type="Added">more errorchecks to char create, it now checks if hair/beard/face can be equipped (fixes crash with latest OSI
        tiledata where facial horn has the same layer as "normal" horn)
      </change>
      <change type="Added">Combatcfg:AttackWhileFrozen 1/0 (default 1) if set to false attack checks if chr is frozen or paralyzed
      </change>
    </entry>
    <entry>
      <date>01-12-2010</date>
      <author>Turley</author>
      <change type="Added">on Profile opening and update request "scripts/misc/charprofile.ecl" is called<br/>
        params are character, of_who, mode,uctext<br/>
        if mode==0 (request) uctext is 0<br/>
        if mode==1 (update) uctext is new unicode array<br/>
        both modes ignore the return value
        - Tomi
      </change>
      <change type="Added">uo::SendCharProfile( character, of_who, title, uneditable_text := CHARPROFILE_NO_UNEDITABLE_TEXT, editable_text := CHARPROFILE_NO_EDITABLE_TEXT )<br/>
        will send the serverside charprofile packet back to client and display it for the player.<br/>
        uneditable_text &amp; editable_text are unicode arrays<br/>
        constants are:<br/>
        const CHARPROFILE_NO_UNEDITABLE_TEXT := array;<br/>
        const CHARPROFILE_NO_EDITABLE_TEXT := array;
        - Tomi
      </change>
      <change type="Note">Only a script interface for making a fully working CharProfile without packethooks.
        Not a fully working charprofile system controlled by the core, ALL text strings still have to be
        stored somewhere by scripts.
      </change>
    </entry>
    <entry>
      <date>01-01-2010</date>
      <author>Nando</author>
      <change type="Added">(Tomi) New itemdesc property "StackLimit", defines the maximum stack
        of that item (lower than 60k). If not defined, will default to 60000.
      </change>
      <change type="Note">Happy new year. :)
      </change>
    </entry>
  </version>
  <version name="POL099 Beta #2">
    <entry>
      <date>12-21-2009</date>
      <author>Turley</author>
      <change type="Fixed">call of built-in method with ._methodname if overridden
      </change>
      <change type="Added">Multis now support method script
      </change>
    </entry>
    <entry>
      <date>12-18-2009</date>
      <author>Turley</author>
      <change type="Added">file::CreateDirectory( dirname )<br/>
        returns 1 on success else error<br/>
        ("Error in dirname descriptor","No parent path traversal please.",
        "Directory already exists.","Could not create directory.")
      </change>
      <change type="Added">file::ListDirectory( dirname, extension := LISTDIR_ALL_FILES, listdirs := LISTDIR_DONT_LIST_DIRS )<br/>
        extension param can be extension without "." or file.em constant<br/>
        file.em constants:<br/>
        const LISTDIR_LIST_DIRS      := 0x1;<br/>
        const LISTDIR_DONT_LIST_DIRS := 0x0;<br/>
        const LISTDIR_NO_FILES       := "";<br/>
        const LISTDIR_ALL_FILES      := "*";<br/>
        returns array of strings or error<br/>
        ("Error in dirname descriptor","No parent path traversal please.","Directory not found.")
      </change>
      <change type="Note">Both functions doesnt check file access rights
      </change>
    </entry>
    <entry>
      <date>12-17-2009</date>
      <author>Turley</author>
      <change type="Added">uo::CloseWindow( character, type, object ) - Tomi<br/>
        possible values for type<br/>
        const CLOSE_PAPERDOLL := 1;<br/>
        const CLOSE_STATUS    := 2;<br/>
        const CLOSE_PROFILE   := 8;<br/>
        const CLOSE_CONTAINER := 12;<br/>
      </change>
      <change type="Note">if ( type == CLOSE_CONTAINER ) object has to be a ContainerRef, to close the open container gump.
        else object has to be a MobRef to close paperdoll, status or profile of the chosen mob.
      </change>
    </entry>
    <entry>
      <date>12-16-2009</date>
      <author>Turley</author>
      <change type="Added">Encrypted Client support - Tomi
      </change>
      <change type="Changed">uoclient.cfg Listener::Encryption and pol.cfg ClientEncryptionVersion now support
        ignition = uorice = none, 2.0.0x and due to autocalculation major.minor.build (no patch)
        e.g. 7.0.4 for latest client 7.0.4.1
        default for both is "none"
      </change>
      <change type="Note">Till OSI changes the encryption type pol now supports every encrypted client without
        updating the core (last change was 2.0.4)
      </change>
    </entry>
    <entry>
      <date>12-04-2009</date>
      <author>Turley</author>
      <change type="Removed">deprecated pol.cfg entries "MasterKey1","MasterKey2","ClientVersion","KeyFile" - Tomi
      </change>
      <change type="Added">Gargoyles count as mounted while flying
      </change>
    </entry>
    <entry>
      <date>12-03-2009</date>
      <author>Turley</author>
      <change type="Added">basic gargoyle flying support (new movemode "F")
      </change>
      <change type="Fixed">poison status for newer clients
      </change>
      <change type="Note">gargoyles can "fly" on tiles with tiledata flag HOVEROVER (MAPDATA_FLAG_OVERFLIGHT)<br/>
        rebuilding of all realms is required<br/>
        currently flymode can only be activated clientside (0xBF:0x32) and if race=RACE_GARGOYLE<br/>
        renamed uo:TILEDATA_FLAG_NODIAGONAL to uo:TILEDATA_FLAG_HOVEROVER
      </change>
    </entry>
    <entry>
      <date>12-02-2009</date>
      <author>Turley</author>
      <change type="Added">0xF3 packet is send instead of 0x1A for clients &gt;= 7 or UO:SA clients - Tomi
      </change>
      <change type="Added">polcfg MaxTileID 0x3FFF / 0x7FFF (default 0x3FFF)<br/>
        since client 7.0.0.0 item graphic can be definied up to 0x7FFF - Tomi
      </change>
      <change type="Added">"SA" for expansion type. This includes sending 0x187DF with packet 0xB9. - Tomi
      </change>
      <change type="Added">support of new map TerMur - Tomi
      </change>
      <change type="Note">uoconvert param:<br/>
        realm=termur mapid=5 width=1280 height=4096<br/>
        uoconvert.cfg new stairs since SA:<br/>
        0x1de0 0x1de1 0x1de2 0x1de3 0x1de4 0x1de5 0x1de6 0x1de7 0x1de8 0x1de9 0x1dea 0x1deb
      </change>
      <change type="Added">Gargoyle support (race = uo:RACE_GARGOYLE)
      </change>
      <change type="Note">graphics are:<br/>
        UOBJ_GARGOYLE_MALE         0x029A<br/>
        UOBJ_GARGOYLE_FEMALE       0x029B<br/>
        UOBJ_GARGOYLE_MALE_GHOST   0x02B6<br/>
        UOBJ_GARGOYLE_FEMALE_GHOST 0x02B7
      </change>
      <change type="Added">support of UO:KR/SA char create packet 0x8D
      </change>
      <change type="Added">new gargoyle hair &amp; beard 0x4258-0x425F &amp; 0x42AD-0x42B0
      </change>
      <change type="Added">UO:KR/SA face support
      </change>
      <change type="Added">ssopt.SupportFaces 0/1/2 (default 0)<br/>
        set it to 1 to support basic faces<br/>
        set it to 2 to support roleplay faces (sets 0x2000 flag in 0xB9 packet)
      </change>
      <change type="Note">Faces are normal items (like hair/beard) with layer 15, objtype 0x3B44-0x3B57
        roleplay faces 0x3B4E-0x3B57
      </change>
    </entry>
    <entry>
      <date>11-30-2009</date>
      <author>Turley</author>
      <change type="Added">polsys::MD5Encrypt(str) returns MD5 hash string.</change>
      <change type="Fixed">RecalcVitals function for vital changes doesnt check if maximum value changed</change>
    </entry>
    <entry>
      <date>11-26-2009</date>
      <author>Turley</author>
      <change type="Added">Syshook CanDie(mobile)
        Called when the mobile is about to die, return 0 to stop death.
      </change>
    </entry>
    <entry>
      <date>11-24-2009</date>
      <author>Turley</author>
      <change type="Fixed">missing realm check for ListenPoints
      </change>
    </entry>
    <entry>
      <date>11-23-2009</date>
      <author>Turley</author>
      <change type="Added">uotool param staticdefrag [realm=britannia] to defrag/remove duplicate statics (like fiddler does)
      </change>
    </entry>
    <entry>
      <date>11-20-2009</date>
      <author>Turley</author>
      <change type="Changed">RecalcVitals( character, calc_attribute := RECALC_INTRINSIC_MOD, calc_vital := RECALC_VITALS )<br/>
        const RECALC_INTRINSIC_MOD    := 1;<br/>
        const RECALC_NO_INTRINSIC_MOD := 0;<br/>
        const RECALC_VITALS           := 1;<br/>
        const RECALC_NO_VITALS        := 0;<br/>
        possible values for calc_attribute:<br/>
        RECALC_INTRINSIC_MOD - calls for every attribute the GetIntrinsicModFunction (old behaviour)<br/>
        RECALC_NO_INTRINSIC_MOD - skips the GetIntrinsicModFunction calls<br/>
        attribute name string - only calls the GetIntrinsicModFunction for given attribute<br/>
        possible values for calc_vital:<br/>
        RECALC_VITALS - calls for every vital the RegenRateFunction &amp; MaximumFunction (old behaviour)<br/>
        RECALC_NO_VITALS - skips the RegenRateFunction &amp; MaximumFunction calls<br/>
        vital name string - only calls the RegenRateFunction &amp; MaximumFunction for given vital<br/>
        - based on Tomi
      </change>
    </entry>
    <entry>
      <date>11-19-2009</date>
      <author>Turley</author>
      <change type="Changed">chr.setlightlevel() now supports endless duration (-1) return is the new gameclock value - Tomi
      </change>
      <change type="Added">[paralyzed] &amp; [deafened] @ singleclick packet - Tomi
      </change>
      <change type="Added">ServSpecOpt CoreSendsSeason 1/0 (default 1)<br/>
        Determines if the core should send season packet on char creation/logon/reconnect and realm
        change based on the season entry in realm.cfg. - Tomi
      </change>
      <change type="Removed">"You cannot insert that item into the container." sysmsg after container CanInsert script
        returns 0 - Tomi
      </change>
      <change type="Changed">uo::UpdateMobile(who, flags:=UPDATEMOBILE_UPDATE)<br/>
        const UPDATEMOBILE_RECREATE := 1;<br/>
        const UPDATEMOBILE_UPDATE   := 0;<br/>
        if flags is UPDATEMOBILE_UPDATE old behaviour it sends update Mobile packet 0x77,<br/>
        if set to UPDATEMOBILE_RECREATE it sends recreate packet 0x78 - Tomi
      </change>
      <change type="Added">ServSpecOpt CoreHandledTags (default 0xffff)<br/>
        bitfield to determine which tags are displayed on singleclick, current used bits are:<br/>
        0x1  [title_guild]<br/>
        0x2  [frozen]<br/>
        0x4  [paralyzed]<br/>
        0x8  [squelched]<br/>
        0x10 [deafened]
      </change>
    </entry>
    <entry>
      <date>11-17-2009</date>
      <author>Turley</author>
      <change type="Fixed">possible hang in party system<br/>
        remove object packet send when container is on a character<br/>
        several movement code bugs
      </change>
    </entry>
    <entry>
      <date>11-16-2009</date>
      <author>Turley</author>
      <change type="Added">NPCs receive EnteredArea event on char resurrect
      </change>
    </entry>
    <entry>
      <date>11-11-2009</date>
      <author>Turley</author>
      <change type="Changed">intern container MaxItems too highest possible value (packet size) its now 3200
      </change>
      <change type="Changed">container "can add"-functions to only check weight recursive
      </change>
    </entry>
    <entry>
      <date>10-22-2009</date>
      <author>Turley</author>
      <change type="Added">Syshook Ouch(mobile,lastx,lasty,lastz)<br/>
        Called if mobile falls atleast 22 down (fixed Clientside value)
      </change>
      <change type="Added">uo::CanWalk(movemode, x1, y1, z1, x2_or_dir, y2 := CANWALK_DIR, realm := _DEFAULT_REALM)<br/>
        movemode is mobile.movemode string<br/>
        if y2 is CANWALK_DIR x2 is considered as direction (0-7)<br/>
        if x2 and y2 is given it calculates the needed direction<br/>
        returns new z value or error
      </change>
    </entry>
    <entry>
      <date>10-17-2009</date>
      <author>Turley</author>
      <change type="Added">PrivUpdater for "invul","seeghosts","seehidden" and "seeinvisitems" updates/sends/removes objects
        in visual range on enable/disable - Tomi
      </change>
      <change type="Changed">.startlog/.stoplog checks now if priv "plogany" is enabled instead of only given - Tomi
      </change>
      <change type="Fixed">priv "all" now works as expected if enabled every other priv is also enabled
      </change>
    </entry>
    <entry>
      <date>10-14-2009</date>
      <author>MuadDib</author>
      <change type="Changed">Methods Char.Squelch() and Char.Deaf() return the gameclock value they are in effect until.
      </change>
    </entry>
    <entry>
      <date>10-14-2009</date>
      <author>Turley</author>
      <change type="Added">char privilege "canbeheardasghost"<br/>
        With this privilege everybody can hear you even as a ghost (no 'oO' replacement) - Tomi
      </change>
      <change type="Added">pol.cfg TimestampEveryLine 1/0 (default 0) if set every line in pol.log gets timestamp
      </change>
      <change type="Added">char.deaf(duration) - duration in seconds.  -1=forever, 0=off
      </change>
      <change type="Added">char.deafened r/o
      </change>
    </entry>
  </version>
  <version name="POL099 Beta #1">
    <entry>
      <date>10-12-2009</date>
      <author>Turley</author>
      <change type="Changed">Method/Syshook definitions now supports :pkg: format - Tomi
      </change>
      <change type="Added">ServSpecOpt SpeechRange default 12<br/>
        ServSpecOpt WhisperRange default 2<br/>
        ServSpecOpt YellRange default 25<br/>
        - Tomi
      </change>
    </entry>
    <entry>
      <date>10-10-2009</date>
      <author>Turley</author>
      <change type="Added">new Spellbook methods<br/>
        book.removespell(id) removes given spellid returns 1/0<br/>
        book.addspell(id) adds given spellid returns 1/0
      </change>
    </entry>
    <entry>
      <date>10-09-2009</date>
      <author>Turley</author>
      <change type="Added">new Spellbook methods<br/>
        book.spells() returns Array of SpellIDs<br/>
        book.hasspell(id) checks if SpellID is inside the spellbook returns 1/0
      </change>
    </entry>
    <entry>
      <date>10-07-2009</date>
      <author>Turley</author>
      <change type="Fixed">DestroyItem call inside CanInsert scripts
      </change>
    </entry>
    <entry>
      <date>10-03-2009</date>
      <author>MuadDib</author>
      <change type="Added">SysHook::CanDecay(item). Return 0, core decay will ignore item and continue on the cycler. If it
        returns 1, core decay will handle the item as normal. - Patch submitted by Tomi
      </change>
      <change type="Fixed">Useage of plural forms for more than 1 word in the itemdesc desc entry. - Patch by Tomi
      </change>
    </entry>
    <entry>
      <date>09-22-2009</date>
      <author>Turley</author>
      <change type="Added">Combatcfg:SendDamagePacket 1/0 default 0 if set sends packet 0xB (0xBF sub 0x22 for clients&lt;4.0.7a)
        to attacker(ScriptController) and defender on ApplyDamage and ApplyRawDamage
      </change>
      <change type="Added">new param to ApplyDamage &amp; ApplyDamage they are now:<br/>
        ApplyDamage( mobile, damage, userepsys := DAMAGE_USE_REPSYS );<br/>
        ApplyRawDamage( character, hits, userepsys := DAMAGE_USE_REPSYS );<br/>
        const DAMAGE_USE_REPSYS := 1;<br/>
        const DAMAGE_NO_REPSYS := 0;<br/>
        If userepsys is set to DAMAGE_NO_REPSYS repsys system isnt called (on_attack &amp; on_damage)
      </change>
    </entry>
    <entry>
      <date>09-22-2009</date>
      <author>MuadDib</author>
      <change type="Changed">NPC/Char ar/ar_mod internal handling rewrote.
      </change>
      <change type="Fixed">NPC Elemental Resist/Damage storage issues.
      </change>
      <change type="Fixed">Lightlevel resetting in client during Login.
      </change>
    </entry>
    <entry>
      <date>09-20-2009</date>
      <author>MuadDib</author>
      <change type="Changed">Spell casting no longer unhides. Be sure to update your scripts to unhide.
      </change>
      <change type="Changed">SpeakPowerWords() will now check if mob is hidden. If so, it uses Private Say Above.
      </change>
    </entry>
    <entry>
      <date>09-18-2009</date>
      <author>MuadDib</author>
      <change type="Added">Multi Walk On Script support. Works for player and npc. Just add Walkon itemdesc entry to the house.
      </change>
      <change type="Note">This is in early stages. While it is working, not all cases may register and deregister where a mob
        gets put onto or removed from a house. If you find cases that do, report to bugtracker.
      </change>
      <change type="Removed">Storing scrolls inside spellbooks. Destroyed after insert is complete.
      </change>
      <change type="Changed">Pre-AOS Clients still get the same packet they always did when opening a spellbook, built entirely
        off the bitflag system for newer spellbooks. So no more keeping scrolls inside of books. :D
      </change>
      <change type="Note">As spellbooks are loaded for the first time with newer cores and as added to books, scrolls are
        marked SaveOnExit 0. Newly inserted scrolls from then on, are destroyed during insertion after spell
        contents are updated on the book.
      </change>
    </entry>
    <entry>
      <date>09-16-2009</date>
      <author>Turley</author>
      <change type="Removed">char.isUOKR
      </change>
      <change type="Added">char.ClientType r/o bitfield
      </change>
      <change type="Note">current Flags are:<br/>
        CLIENTTYPE_4000  = 0x1,  // 4.0.0a   (new spellbookcontent packet 0xbf:0x1b)<br/>
        CLIENTTYPE_4070  = 0x2,  // 4.0.7a   (new damage packet 0x0b instead of 0xbf:0x22)<br/>
        CLIENTTYPE_5000  = 0x4,  // 5.0.0a   (compressed gumps)<br/>
        CLIENTTYPE_5020  = 0x8,  // 5.0.2a   (Buff/Debuff 0xdf)<br/>
        CLIENTTYPE_6017  = 0x10, // 6.0.1.7  (Grid locs)<br/>
        CLIENTTYPE_60142 = 0x20, // 6.0.14.2 (feature enable 0xb9 size change)<br/>
        CLIENTTYPE_UOKR  = 0x40,<br/>
        CLIENTTYPE_7000  = 0x80, // 7.0.0.0  (Gargoyle race)<br/>
        CLIENTTYPE_UOSA  = 0x100
      </change>
      <change type="Note">Pol will be now compiled with flag /LARGEADDRESSAWARE (win only flag) pol should now be able to consume more memory
      </change>
    </entry>
    <entry>
      <date>09-14-2009</date>
      <author>MuadDib</author>
      <change type="Removed">All import abilities built in to core for UOX data files. O_O
      </change>
      <change type="Note">The file "import.txt" will be loaded each time POL loads, when found in the world data directory. This file's
        format is the same as, for example, the ITEMS.TXT file POL saves. You can use this for example, to store all your
        doors, decorations, etc, to ensure they are reloaded after a wipe, or loaded every time POL starts. These items
        are added to the real world, and saved to items.txt. However, if on load the same objtype is found at the same
        x y z as the item in IMPORT.TXT, it destroys that item, and loads the import one.
      </change>
    </entry>
    <entry>
      <date>09-10-2009</date>
      <author>Turley</author>
      <change type="Added">CompressedGump support packet 0xdd
      </change>
      <change type="Added">flag param to SendDialogGump() SENDDIALOGMENU_FORCE_OLD/0 default 0
      </change>
      <change type="Note">SendDialogGump sends compressed gump if (client.isUOKR || (!SENDDIALOGMENU_FORCE_OLD &amp;&amp; clientversion &gt;=5.0.0a)) else old uncompressed
      </change>
      <change type="Note">Patch submitted by Grin
      </change>
    </entry>
    <entry>
      <date>09-09-2009</date>
      <author>Turley</author>
      <change type="Added">ServSpecOpt CarryingCapacityMod (double default 1.0) as * modifier for mobile max_weight
      </change>
      <change type="Note">Formula is (40 + strength * 7 / 2) * ssopt.CarryingCapacityMod
      </change>
      <change type="Note">Since ML max weight is send for statusgump
      </change>
      <change type="Note">Patch submitted by Tomi
      </change>
    </entry>
    <entry>
      <date>09-05-2009</date>
      <author>MuadDib</author>
      <change type="Added">POL Linux builds will now create a PID file when loading. Patch submitted by Crazyman
      </change>
    </entry>
    <entry>
      <date>09-05-2009</date>
      <author>Turley</author>
      <change type="Added">struct .? and .- as shortcut for .exists() and .erase()
      </change>
    </entry>
    <entry>
      <date>09-03-2009</date>
      <author>MuadDib</author>
      <change type="Changed">CoreHitSounds, ScriptedAttackChecks, ResetSwingOnTurn, SendSwingPacket all moved from SSOPT to Combat CFG.
      </change>
    </entry>
    <entry>
      <date>08-19-2009</date>
      <author>Turley</author>
      <change type="Added">r/o member character.uo_expansion_client client sends this flag at packet 0x5D charselect and 0x00 createchar
      </change>
      <change type="Note">values are:<br/>
        FLAG_T2A         = 0x00,<br/>
        FLAG_RENAISSANCE = 0x01,<br/>
        FLAG_THIRD_DAWN  = 0x02,<br/>
        FLAG_LBR         = 0x04,<br/>
        FLAG_AOS         = 0x08,<br/>
        FLAG_SE          = 0x10,<br/>
        FLAG_SA          = 0x20,<br/>
        FLAG_UO3D        = 0x40,  // ?<br/>
        FLAG_RESERVED    = 0x80,<br/>
        FLAG_3DCLIENT    = 0x100  // 3d Client
      </change>
    </entry>
    <entry>
      <date>08-14-2009</date>
      <author>Turley</author>
      <change type="Changed">Stopped spam of unknown packet for 0xBF.5 &amp; 0xBF.C
      </change>
    </entry>
    <entry>
      <date>08-09-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Better handling of sending poison updated to UO:KR Clients.
      </change>
      <change type="Changed">UpdateCharacterWeight() now sends correct packets instead of calling on RefreshAR() to
        notify client of new weight. Reduces overhead.
      </change>
    </entry>
    <entry>
      <date>08-07-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">New system in core for handling layers on items and corpses. On mobile death, only items equipped
        will be given the Layer prop in the corpse.
      </change>
      <change type="Changed">New system for corpses also is affected by insert/remove of items to the corpse by script and
        drop into by player. Dropping new items into a corpse will cause it to set the layer accordingly
        long as nothing else is already using that layer on the corpse.
      </change>
      <change type="Changed">Very small optimization to equip item code for handling the setting of layer.
      </change>
    </entry>
    <entry>
      <date>08-06-2009</date>
      <author>MuadDib</author>
      <change type="Changed">PasswordOnlyHash removed from core. Now only ClearText and Hashed Passwords will be used.
        Default is now PasswordHash instead of ClearText.
      </change>
      <change type="Note">Using ClearText is not recommended as it leaves all your account's passwords wide open if
        the accounts.txt file is comprimised. You have been warned.
      </change>
      <change type="Removed">Account.PasswordHash - This was for the PasswordOnlyHash.
      </change>
      <change type="Added">Item.getgottenby Member. Returns CharRef of Player holding item, Error if not being held.
      </change>
    </entry>
    <entry>
      <date>08-06-2009</date>
      <author>Turley</author>
      <change type="Added">new Methods<br/>
        Character.setAggressorTo(chr)<br/>
        Character.setLawfullydamagedTo(chr)<br/>
        sets aggressor/lawfullydamaged for repsys.cfg:AggressorFlagTimeout seconds for given chr<br/>
        Character.clearAggressorTo(chr)<br/>
        Character.clearLawfullydamagedTo(chr)<br/>
        clears aggressor/lawfullydamaged entry for given chr
      </change>
    </entry>
    <entry>
      <date>08-04-2009</date>
      <author>MuadDib</author>
      <change type="Changed">RecalcVitals() and other internal parts of core that share recalc_vital_stuff() will now check to see if
        each vital has changed, before resending it to client. Reduces overhead.
      </change>
    </entry>
    <entry>
      <date>08-03-2009</date>
      <author>MuadDib</author>
      <change type="Removed">uopacket.cfg::is6017 has been removed.
      </change>
      <change type="Added">uopacket.cfg::Version (1 or 2) Default 1<br/>
        uopacket.cfg::Client (client version string) Default 1.25.25.0<br/>
        Read packethooks.txt for details.
      </change>
    </entry>
    <entry>
      <date>07-31-2009</date>
      <author>Turley</author>
      <change type="Added">ServSpecOpts::ResetSwingOnTurn=true/false default false<br/>
        Should SwingTimer be reset with projectile weapon on facing change
      </change>
      <change type="Added">ServSpecOpts::SendSwingPacket=true/false default true<br/>
        Should packet 0x2F be send on swing.<br/>
        Client sends automatically move packet to face the opponent
      </change>
    </entry>
    <entry>
      <date>07-25-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Bug blocking equipping when intrinsic weapon was marked as two handed.
      </change>
    </entry>
    <entry>
      <date>07-17-2009</date>
      <author>Turley</author>
      <change type="Added">"ShadowRealms"<br/>
        polsys::AddRealm(realm_name,base_realm);<br/>
        returns 1 or error ("BaseRealm not found.","BaseRealm is a ShadowRealm.","Realmname already defined.")<br/>
        Creates a new Realm based on an other realm, uses same map and regions<br/>
        polsys::DeleteRealm(realm);<br/>
        returns 1 or error ("Realm not found.","Realm is not a ShadowRealm.","Mobiles in Realm.","Items in Realm.")<br/>
        Deletes a ShadowRealm, only if the realm is "clean"
      </change>
      <change type="Note">ShadowRealms get saved/loaded in pol.txt
      </change>
      <change type="Note">if ServerSpecOpt is set AddRealm/startup creates a Decaythread
      </change>
      <change type="Changed">On realm change client gets RemovePacket for all objects inrange
      </change>
    </entry>
    <entry>
      <date>07-16-2009</date>
      <author>MuadDib</author>
      <change type="Added">Removal of Grid Index to items when Container::remove is called within the core.
      </change>
      <change type="Added">ItemDesc::Container::MaxSlots = 1-255, default ServSpecOpts::MaxSlots
      </change>
      <change type="Added">ServSpecOpts::UseContainerSlots=true/false, default false.
      </change>
      <change type="Added">UseContainerSlots check to can add bulk code to ensure not going over max slot capacity of 255 and a container's max slot capacity.
      </change>
      <change type="Changed">DropItem packets now redone for Slot support. Better handling internally, and core will move an item to next available slot
        if one sent is not available. Before code is used, it checks if UseContainerSlots is true.</change>
      <change type="Note">UseContainerSlots is not yet fully implemented. Will cause core to ignore all grid setting for core moved items.
        The purpose of this, is since Legacy 2D clients ignore this setting anyway, you can use this to ignore Max Slots
        and allow core to move items into a container regardless of MaxSlots settings (which is kinda like a secondary Max Items).
        With this enabled, it will enfore MaxSlots when core and player moves items to containers. If Max Items is not reached,
        it will check MaxSlots. If MaxSlots is not reached, allows moving the item into container.
        This is being added to allow to turn grid support on and off based on the client versions (and types) that you will be
        supporting on your shard.
      </change>
    </entry>
    <entry>
      <date>07-04-2009</date>
      <author>Turley</author>
      <change type="Added">new Object Class BinaryFile<br/>
        File::OpenBinaryFile( filename, mode := OPENMODE_IN, endian := LITTLE_ENDIAN );<br/>
        like the other file functions it checks file access rights (fileaccess.cfg) (Read and/or Write)<br/>
        mode constants:<br/>
        const OPENMODE_IN    := 0x01; // (input) Allow input operations on the stream<br/>
        const OPENMODE_OUT   := 0x02; // (output) Allow output operations on the stream<br/>
        const OPENMODE_ATE   := 0x04; // (at end) Set the stream's position indicator to the end of the stream on opening<br/>
        const OPENMODE_APP   := 0x08; // (append) Set the stream's position indicator to the end of the stream before each output operation<br/>
        const OPENMODE_TRUNC := 0x10; // (truncate) Any current content is discarded, assuming a length of zero on opening<br/>
        endian constants:<br/>
        const LITTLE_ENDIAN := 0x00;<br/>
        const BIG_ENDIAN    := 0x01;<br/>
        returns BinaryFile Object or error
      </change>
      <change type="Note">implemented BinaryFile comparisons are<br/>
        true/false (!) checks if filestream is open<br/>
        == checks if filename is the same
      </change>
      <change type="Added">BinaryFile methods:<br/>
        .close() closes the underlying stream returns 1<br/>
        .size() returns the filesize or error<br/>
        .seek(int offset, int seekdir) sets position returns 1/0 or error<br/>
        seekdir constants:<br/>
        const SEEKDIR_BEG := 0x00; // beginning of sequence<br/>
        const SEEKDIR_CUR := 0x01; // current position within sequence<br/>
        const SEEKDIR_END := 0x02; // end of sequence<br/>
        .tell() gets current position returns int<br/>
        .peek() Reads and returns the next byte without extracting it (-1 if eof is reached)<br/>
        .flush() writes all unwritten chars from buffer to file<br/>
        .getInt32() gets unsigned 32-bit (4 byte) 1 or error<br/>
        .getInt16() gets unsigned 16-bit (2 byte) 1 or error<br/>
        .getInt8() gets unsigned 8-bit (1 byte) 1 or error<br/>
        .getSInt32() gets signed 32-bit (4 byte) 1 or error<br/>
        .getSInt16() gets signed 16-bit (2 byte) 1 or error<br/>
        .getSInt8() gets signed 8-bit (1 byte) 1 or error<br/>
        .getString(length) gets a string (1-byte characters) string or error<br/>
        .setInt32() sets unsigned 32-bit (4 byte) 1 or error<br/>
        .setInt16() sets unsigned 16-bit (2 byte) 1 or error<br/>
        .setInt8() sets unsigned 8-bit (1 byte) 1 or error<br/>
        .setSInt32() sets signed 32-bit (4 byte) 1 or error<br/>
        .setSInt16() sets signed 16-bit (2 byte) 1 or error<br/>
        .setSInt8() sets signed 8-bit (1 byte) 1 or error<br/>
        .setString(string string, int nullterminate) sets a string set nullterminate to 1 to append a 0 terminator 1 or error<br/>
      </change>
    </entry>
    <entry>
      <date>07-01-2009</date>
      <author>Turley</author>
      <change type="Changed">UoConvert now also saves the color of static tiles
      </change>
      <change type="Added">ListStatics* return struct member "hue"
      </change>
      <change type="Note">Rebuild of all realms is required
      </change>
    </entry>
    <entry>
      <date>06-29-2009</date>
      <author>MuadDib</author>
      <change type="Added">Additional check in internal grid checks on containers, to speed up handling for full containers.
      </change>
      <change type="Added">ServSpecOpt.cfg::MaxContainerSlots=unsigned integer.
        This will allow setting the internal overall allowed item count for containers. This is introduced for future KR support.
        KR client is only 125, but we are making this here so custom clients later can support more slots.
        If you have containers with max item count over 125 and use ONLY 2D, and not KR, set this to your highest amount used!
      </change>
    </entry>
    <entry>
      <date>06-27-2009</date>
      <author>Turley</author>
      <change type="Fixed">Item creation with ItemDescriptor can now override .Desc
      </change>
    </entry>
    <entry>
      <date>06-25-2009</date>
      <author>Turley</author>
      <change type="Added">new r/o Members (Array{Struct{"serial","ref","seconds"}})<br/>
        Mobile.aggressorto<br/>
        Mobile.lawfullydamaged<br/>
        as interface for core repsyssystem
      </change>
    </entry>
    <entry>
      <date>06-20-2009</date>
      <author>Turley</author>
      <change type="Added">new r/w Members (Double) default 1.0<br/>
        Mobile.movecost_walk_mod<br/>
        Mobile.movecost_run_mod<br/>
        Mobile.movecost_walk_mounted_mod<br/>
        Mobile.movecost_run_mounted_mod<br/>
        used as multiplier see movecost.cfg doc for exact calculation
      </change>
    </entry>
    <entry>
      <date>06-17-2009</date>
      <author>Turley</author>
      <change type="Added">Method Array.randomentry() shortcut for var entry:=array[RandomInt(array.size())+1];
      </change>
      <change type="Added">uo::GetRegionLightLevelAtLocation(x,y,realm) returns the current region lightlevel
      </change>
    </entry>
    <entry>
      <date>05-02-2009</date>
      <author>Turley</author>
      <change type="Added">new TargetCoordinates return member "multi" with multiref if coords are inside a multi
      </change>
    </entry>
    <entry>
      <date>04-17-2009</date>
      <author>Turley</author>
      <change type="Changed">SpeechMul SysHook has now an additional parameter with the complete message as string
      </change>
      <change type="Added">party hooks:<br/>
        OnLeaveParty(who,fromwho)<br/>
        OnAddToParty(who)<br/>
        OnPartyCreate(party)<br/>
        OnDecline(who)<br/>
        OnLootPermChange(who)
      </change>
      <change type="Note">OnLeaveParty fromwho==who if who removes himself
      </change>
      <change type="Added">party General options:<br/>
        RemoveMemberOnLogoff 1/0 (default 0)<br/>
        RejoinPartyOnLogon 1/0 (default 0)
      </change>
      <change type="Note">RejoinPartyOnLogon is only used if RemoveMemberOnLogoff is true, if partyleader logoffs
        the next member becomes the leader
      </change>
    </entry>  
  </version>
  
  <version name="POL098.2">
    <entry>
      <date>08-21-2009</date>
      <author>Turley</author>
      <change type="Fixed">Regions where limited to 128 due to intern (char)id, changed to ushort
      </change>
    </entry>
    <entry>
      <date>07-31-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Cleanup crash in shutdown involving characters and combat. Now all clients and characters are disconnected by the
        core before any cleanup is intiated. This will begin the cleanup for client and character alike.
      </change>
    </entry>
    <entry>
      <date>07-20-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Item::Facing updates were no longer updating surrounding clients.
      </change>
      <change type="Fixed">Bug with stackables where graphic and crops may be different, still allowing to combine stack (of same objtype)
      </change>
    </entry>
    <entry>
      <date>07-15-2009</date>
      <author>Turley</author>
      <change type="Added">Support for client 6.0.14.2 and latest UOKR (this change breaks every older UOKR)
        packet 0xB9 has now a length of 5
      </change>
    </entry>
    <entry>
      <date>06-28-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Graphic/Layer bug when changing graphic and item is equipped. Now core will block this, returning a Error Struct to the script when attempting
        to change the graphic of an item with layer set.
      </change>
    </entry>
    <entry>
      <date>06-27-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Layer bug with updating/sending equipped items
      </change>
    </entry>
  </version>
  
  <version name="POL098.1">
    <entry>
      <date>06-20-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Reset now occurs for tile_layer internal property when graphic is changed on item class.
      </change>
      <change type="Fixed">SetOpponent() for npcs will now once again correctly set the warmode.
      </change>
    </entry>
    <entry>
      <date>05-20-2009</date>
      <author>Turley</author>
      <change type="Fixed">TypeOf() return of Error
      </change>
    </entry>
    <entry>
      <date>05-14-2009</date>
      <author>Turley</author>
      <change type="Fixed">some Memoryleaks
      </change>
    </entry>
    <entry>
      <date>04-29-2009</date>
      <author>Turley</author>
      <change type="Fixed">Exception on mobile.kill() if death/chrdeath.ecl does not exist
      </change>
    </entry>
    <entry>
      <date>04-28-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Removal of items from containers not sending destroy object to nearby clients when object removed.
        This affects containers when was owned by a character.
      </change>
    </entry>
    <entry>
      <date>04-21-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Crash at shutdown during character cleanup involving players that was in combat.
      </change>
    </entry>
    <entry>
      <date>04-20-2009</date>
      <author>Turley</author>
      <change type="Added">Comparison check == for Boat,Multi,GuildRef
      </change>
    </entry>
    <entry>
      <date>04-19-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Endian format for SendPartyMsg().
      </change>
    </entry>
  </version>
  
  <version name="POL098">
    <entry>
      <date>04-06-2009</date>
      <author>MuadDib</author>
      <change type="Changed">When adding ally/enemy guilds, removing ally/enemy guilds, adding/removing members, core now
        updates online members and those around them correctly.
      </change>
      <change type="Added">If LogLevel in pol.cfg is higher than 1, new report added to console. If an account has AOS Expansion
        and uses a Spellbook, console now reports this if UOFeatureEnable does not contain 0x20 bitflag for
        new spellbook system in client. This is due to client issues with books using old methods when still
        recieving the AOS flag for an account.
      </change>
    </entry>
    <entry>
      <date>04-05-2009</date>
      <author>MuadDib</author>
      <change type="Changed">Keys/Seeds for packets 0x8C sent by LoginServer. 6.0.1.7 to 6.0.4.0, I don't recommend using at all.<br/>
        0xFEFEFEFC = UOKR Client<br/>
        0XFEFEFEFD = 6050+ 2D Client<br/>
        0xFEFEFEFE = Normal 2D client (pre-6.0.5.0 client)
      </change>
      <change type="Note">Change to keys is for passing these details from Loginserver to Gameserver during loginprocess.
        Clients disconnect from LoginServer and Connect to Gameserver. This is the easiest method for
        identifying the client type connecting to your game server since versions are handled to decide
        this on the loginserver connection.
      </change>
    </entry>
    <entry>
      <date>04-04-2009</date>
      <author>Nando</author>
      <change type="Fixed">Removing an offline member from party was causing POL to crash.
      </change>
    </entry>
    <entry>
      <date>04-04-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Issue with resistances and damages from npcdesc.cfg.
      </change>
      <change type="Note">NPC's eScript changing/quipping with Resistances/Damages will be rewritten in 099. We are
        putting this into 099 due to a Class Rewrite to NPCs that will resolve this issue and allow
        better expansions of the NPC class in the core.
      </change>
    </entry>
  </version>
  
  <version name="POL098 RC2">
    <entry>
      <date>04-02-2009</date>
      <author>MuadDb</author>
      <change type="Fixed">Crash in cleanup of character objects during Shutdown and deletion.
      </change>
      <change type="Fixed">Crash involving sending warmode information during disconnect/shutdown.
      </change>
    </entry>
    <entry>
      <date>04-01-2009</date>
      <author>Nando</author>
      <change type="Fixed">When creating a new char, attributes' caps weren't being set to the default value and
        were just set to a random value.
      </change>
    </entry>
    <entry>
      <date>03-30-2009</date>
      <author>Nando</author>
      <change type="Fixed">Sometimes when casting a spell, a race-condition would make POL end with a
        passert( !start_attached || (script_ex == NULL) ) error in chrituse.cpp.
      </change>
      <change type="Fixed">Bug in Packet::GetString(offset, len) where it would return a string of 'len' ascii chars,
        regardless of having a null-byte in there. Will now limit to len or the first null-byte
        found, whichever comes first.
      </change>
    </entry>
    <entry>
      <date>03-30-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Equipment.quality will now convert plain integers to Double/Float for it when using
        item.quality:=2; instead of item.quality:=2.0;
      </change>
    </entry>
    <entry>
      <date>03-28-2009</date>
      <author>Turley</author>
      <change type="Fixed">Resend party list if remove hooks dont allow it</change>
    </entry>
    <entry>
      <date>03-27-2009</date>
      <author>Turley</author>
      <change type="Fixed">Crash in party speechhandler
      </change>
    </entry>
    <entry>
      <date>03-27-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Crash in Basic::Trim(). Now checks explicitly for String as param 1. Errors out if not.
      </change>
      <change type="Fixed">Event LeftArea and EnteredArea both being able to be triggered when 1 is actually disabled.
      </change>
    </entry>
    <entry>
      <date>03-25-2009</date>
      <author>MuadDib</author>
      <change type="Changed">StrReplace() and SubStrReplace() will now accept Dict/Struct/Array/Error as param 1 and converts
        them to string format (like when using print() or syslog()) before comparing/converting.
      </change>
    </entry>
    <entry>
      <date>03-24-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Crash with StrReplace() allowing to go past end of a string.
      </change>
      <change type="Changed">StrReplace() will now allow the replace_with string to be empty, to remove the to_replace
        param from the string completely.
      </change>
      <change type="Fixed">Crash in onRemove system for removing objects on npc/offline mobiles.
      </change>
    </entry>
  </version>
  <version name="POL098 RC1">
    <entry>
      <date>03-22-2009</date>
      <author>Nando</author>
      <change type="Added">New servspectopt::SendStatLocks (default false) to send the stat locks message.
        Beware that this message will only be sent to clients which have major version &gt; 3
        (to avoid breaking older ones).
      </change>
      <change type="Changed">Canceling of trade window will no longer trigger refreshing of AR/Resistances/Damages.
        It will only send the status bar packet to the client for weight updates.
      </change>
      <change type="Changed">Updates so refreshing of AR/Resistances/Damages is not called when dropping items unless
        to equip them etc as should be.
      </change>
    </entry>
    <entry>
      <date>03-22-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Bug with items that use the Resource entry in ItemDesc.Cfg causing crashes on shutdown.
      </change>
    </entry>
    <entry>
      <date>03-20-2009</date>
      <author>MuadDib</author>
      <change type="Added">Storage system will now ignore all root containers with SaveOnExit set to 0.
      </change>
    </entry>
    <entry>
      <date>03-19-2009</date>
      <author>Nando</author>
      <change type="Added">UO::PlayMusic( chr, music_id := 0 ), plays the music with music_id
        on client. You can find the music id's this uses at your UO FOLDER/Music/Digital/Config.txt
      </change>
    </entry>
    <entry>
      <date>03-19-2009</date>
      <author>Turley</author>
      <change type="Added">on Chatbutton pressing "scripts/misc/chatbutton.ecl" is called
      </change>
      <change type="Note">only simple implementation no Chatsystem!
      </change>
    </entry>
    <entry>
      <date>03-18-2009</date>
      <author>MuadDib</author>
      <change type="Added">Basic::Compare(str1, str2, pos1_start:=0, pos1_end:=0, pos2_start:=0, pos2_end:=0);<br/>
        Can be used in 3 overloaded ways. Returns 1 on compare success.<br/>
        Compare(string1, string2)<br/>
        Compare(string1, string2, string1_index, string1_length)<br/>
        Compare(string1, string2, string1_index, string1_length, string2_index, string2_length)<br/>
        Index is a starting position to begin the compare in the string, and length is the length to
        compare from the index. When using the 3rd method, you can compare substrings in both strings
        instead of just the substring of string1 to entire string2.
      </change>
      <change type="Fixed">Bug with Player Color and their magic underwear in the Race Changer packet handling.
      </change>
    </entry>
    <entry>
      <date>03-18-2009</date>
      <author>Nando</author>
      <change type="Added">New ssopt option: CoreSendsCaps 0/1 (default 0), makes POL send
        attribute cap information in the Send Skills (0x3A) packet.
      </change>
    </entry>
    <entry>
      <date>03-17-2009</date>
      <author>Nando</author>
      <change type="Added">New ssopt option: DefaultAttributeCap (default 1000), defines
        which value POL should use as cap for attributes.
      </change>
      <change type="Added">New attributes.cfg option: DefaultCap (default DefaultAttributeCap),
        to set the default for each attribute.
      </change>
      <change type="Added">GetAttributeCap(who, attr), SetAttributeCap(who, attr, capvalue) and
        GetAttributeDefaultCap(attr). The names should explain it all.
      </change>
      <change type="Note">Caps are defined in tenths (100.0 -&gt; 1000, 55.2 -&gt; 552), same as
        base values.
      </change>
    </entry>
    <entry>
      <date>03-17-2009</date>
      <author>MuadDib</author>
      <change type="Added">Concealed Updater now also run when changing command levels.
      </change>
      <change type="Added">Basic::Trim(string, type, set). Trims whitespaces from strings
        String = String to trim from.
        Type = TRIM_LEFT, TRIM_RIGHT, TRIM_BOTH. Directions to trim the whitespace from. Default is BOTH.
        Set = Character set to trim as whitespace. Default is " ".
      </change>
      <change type="Added">Basic::StrReplace(string, to_replace, replace_with). Replace all instances of to_replace in the string
        with replace_with.
      </change>
      <change type="Added">Basic::SubStrReplace(string, replace_with, start, length:=0). Replace portion of string using replace_with,
        beginning at start for length. If length passed is 0 or lower, it replaces from start to end of string.
        Error Returns: "Index must not be negative", "Index out of range", "Length out of range", "Length must not
        be negative"
      </change>
    </entry>
    <entry>
      <date>03-12-2009</date>
      <author>Turley</author>
      <change type="Added">repsys.cfg General section "PartyHelpFullCountsAsCriminal 1/0" default 0 if 0 OnHelp does not set
        mobile to criminal if helped char is criminal/murderer when they are in the same party
      </change>
    </entry>
    <entry>
      <date>03-11-2009</date>
      <author>Turley</author>
      <change type="Added">new systemhook script 'OnCast'<br/>
        function OnCast(who, spellid)<br/>
        is called if who casts a spell (including macros) before all checks<br/>
        Return: 0 if you wish POL to perform the checks and casting, 1 if you want to handle it fully scriptside
      </change>
      <change type="Note">The two partystatusgump buttons send spellid 11(green) and 29(red) with clientside reserved next target answer
      </change>
      <change type="Added">on Paperdoll Guildbutton pressing "scripts/misc/guildbutton.ecl" is called
      </change>
      <change type="Added">on Paperdoll Questbutton pressing "scripts/misc/questbutton.ecl" is called
      </change>
      <change type="Added">on Paperdoll Virtuebutton (pentagram doubleclick) pressing "scripts/misc/virtuebutton.ecl" is called
      </change>
      <change type="Removed">"Client tried to drop item to X,Y,Z  but server is putting it at Z=" logmsg
      </change>
    </entry>
    <entry>
      <date>03-09-2009</date>
      <author>MuadDib</author>
      <change type="Changed">Console will no longer spam about invalid speech color. Instead it adjusts the
        color back to the default 1001 color and goes on.
      </change>
    </entry>
    <entry>
      <date>03-08-2009</date>
      <author>Turley</author>
      <change type="Added">Partysystem<br/>
        new savefile parties.txt<br/>
        new em Module party.em<br/>
        new cfg file config/party.cfg<br/>
        new Object Class Party<br/>
        savefile parties:<br/>
        saves Leader,Members and Cprops<br/>
        new Char members:<br/>
        who.party r/o returns PartyRef or Error<br/>
        who.candidate_of_party r/o returns PartyRef or Error<br/>
        who.partycanloot 1/0 r/o<br/>
        PartyRef members:<br/>
        party.members r/o returns Array of OfflineCharRefs<br/>
        party.candidates r/o returns Array of OfflineCharRefs<br/>
        party.leader r/o returns OfflineCharRef<br/>
        PartyRef methods:<br/>
        party.setleader(CharRef) sets new Leader returns 1/Error<br/>
        party.addmember(CharRef) adds new Member returns 1/Error<br/>
        party.addcandidate(CharRef) adds new Candidate returns 1/Error<br/>
        party.removemember(CharRef) removes Member returns 1/Error<br/>
        party.removecandidate(CharRef) removes Candidate returns 1/Error<br/>
        party.setprop/getprop/eraseprop/propnames for cprops<br/>
        Party.em:<br/>
        CreateParty( leader, firstmember ); Creates a Party returns 1 or Error<br/>
        DisbandParty( partyref ); Disbands a Party returns 1 or Error<br/>
        SendPartyMsg( party, character, uctext ); Sends PartyMsg with Sender=character returns 1/Error<br/>
        SendPrivatePartyMsg( party, character, tocharacter, uctext ); Sends PrivateMsg with Sender=character
        returns 1/Error<br/>
        party.cfg:<br/>
        General<br/>
        {<br/>
        //How many chars are allowed in a Party (normal clients only have 10 slots)<br/>
        [MaxPartyMembers int (default 10)]<br/>
        //Newer Clients (&gt;=3.0.6e) does not automatically change "/# "<br/>
        //to private msg (they use "/t #")<br/>
        //set to true any public msg will be checked for "# " (0-9 0=slot 10)<br/>
        [TreatNoAsPrivate (1/0) (default 0)]<br/>
        //How long is an invite valid befor automatic decline<br/>
        //set to 0 disables the timeout<br/>
        [DeclineTimeout int seconds (default 10)]<br/>
        //Prefix for a private Msg (e.g. P:)<br/>
        [PrivateMsgPrefix string (default "")]<br/>
        }<br/>
        HookList<br/>
        {<br/>
        // CanAddToParty(leader,member) return check true/false<br/>
        // called when a leader invites someone<br/>
        CanAddToParty<br/>
        // CanRemoveMember(leader,member) return check true/false<br/>
        // called when leader wants to remove member<br/>
        CanRemoveMember<br/>
        // CanLeaveParty (member) return check true/false<br/>
        // called when member wants to leafe the party<br/>
        CanLeaveParty<br/>
        // OnPublicChat(member,uctext) return check none<br/>
        // called when a member sends a PartyMsg e.g. for logging<br/>
        OnPublicChat<br/>
        // OnPrivateChat(member,tomember,uctext) return check none<br/>
        // called when a member sends a PrivateMsg e.g. for logging<br/>
        OnPrivateChat<br/>
        // OnDisband(partyref) return check none<br/>
        // called when a Party is about to be disbanded<br/>
        OnDisband<br/>
        // ChangePublicChat(member,uctext) return new uctext/true/false<br/>
        // called when a member sends a PartyMsg return value is the new uctextarray,<br/>
        // or true for no change, or false to block the msg<br/>
        ChangePublicChat<br/>
        // ChangePrivateChat(member,tomember,uctext) return new uctext/true/false<br/>
        // called when a member sends a PrivateMsg return value is the new uctextarray,<br/>
        // or true for no change, or false to block the msg<br/>
        ChangePrivateChat<br/>
        }
      </change>
      <change type="Note">Candidates are not saved<br/>
        A party with (candidates+members)&lt;=1 gets disbanded
      </change>
      <change type="Note">All msgs send are cliloc's used cliloc numbers are:<br/>
        1005437, 1005439, 1005440, 1005441, 1005442, 1005444, 1005445, 1005446, 1005447, 1005448,
        1005449, 1005450, 1005451, 1005452, 1005453, 1005455, 1008087, 1008089, 1008090, 1008091,
        1008092, 1008094, 1008095, 3000211, 3000222, 3000223
      </change>
    </entry>
    <entry>
      <date>03-08-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Spacing for all titles and name for mobs in Tooltips and Paperdoll. Also added the
        mob.title_guild in the Tooltips string for names of mobiles.
      </change>
    </entry>
    <entry>
      <date>03-08-2009</date>
      <author>Nando</author>
      <change type="Added">New privilege "moveanydist", will allow moving items regardless of distance (by now,
        the only limit to this priv is the client.)
      </change>
    </entry>
    <entry>
      <date>03-07-2009</date>
      <author>MuadDib</author>
      <change type="Changed">Setting of title_prefix, title_suffix, title_race, title_guild will no trigger an
        obj cache to be sent to tooltip enabled clients for updates of tooltips client side.
        This does not affect paperdolls. Paperdolls not being updated until Double Clicking
        again is an issue client-side.
      </change>
      <change type="Added">AOS Extended Statbar members such as followers, followers_max, tithing, and luck will
        now cuase the Update packet to be sent to AOS enabled accounts when changed.
      </change>
      <change type="Changed">Handling of packet 0x07 (Pick Up Item Request). On success, core now checks for if the
        item was equipped on yourself, and refreshes ar and sends stats. If was in a container
        not on your character, only refreshes stats. If item was on the ground, only stats. If
        on a mobile other than yourself, only stats. If item was inside your own worn items,
        it does nothing (since not worn, and no additional weight to send to client). The big
        Difference here, was client use to ALWAYS refresh the ar of character and statmsg. This
        will eliminate at the least, over 50 loops per pickup when it's not needed, and packets
        not being sent, when not needed.
      </change>
    </entry>
    <entry>
      <date>03-06-2009</date>
      <author>MuadDib</author>
      <change type="Added">Elemental Damage properties added for items and mobiles. These follow the same
        rules as all the AOS Resistances. Same details for itemdesc, GetItemDescriptor(),
        etc.<br/>
        Mobile.damage_fire, damage_cold, damage_energy, damage_poison, damage_physical R/O<br/>
        Mobile.damage_fire_mod, etc. R/W<br/>
        Item.damage_fire, etc. R/O<br/>
        Item.damage_fire_mod, etc R/W<br/>
        Itemdesc.cfg: FireDamage, ColdDamage, EnergyDamage, PoisonDamage, PhysicalDamage<br/>
        ItemDesc entries accept Dice Strings just like resistances.<br/>
        NPCDesc.Cfg: FireDamage, etc just like ItemDesc.cfg
      </change>
    </entry>
    <entry>
      <date>03-05-2009</date>
      <author>Nando</author>
      <change type="Changed">Core will no longer spam "out-of-sequence gump command" when closing.</change>
      <change type="Changed">CloseGump(who, pid, response := 0) will now accept any object to be returned,
        and will send '0' as the buttonid in close gump packet.
      </change>
      <change type="Added">Statlock change (Extended Stats, 0xBF sub 0x1A) will be handled if
        CoreHandledLocks is enabled. It will now send statlock (Extended Stats,
        0xBF sub 0x19) on every status update.
      </change>
    </entry>
    <entry>
      <date>03-04-2009</date>
      <author>Nando</author>
      <change type="Added">UO::CloseGump(who, pid, response := 0), closes gump by sending 0xBF's CLOSE_GUMP,
        and returns 'response' for the gump script. 'response' is a LONG. 'pid' is from
        the script that issued the SendGumpDialog() command.
      </change>
    </entry>
    <entry>
      <date>03-03-2009</date>
      <author>MuadDib</author>
      <change type="Changed">Item and Character members for AOS Resistances now report the total of resist and resist_mod.</change>
    </entry>
    <entry>
      <date>03-02-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">eScript's Internal "move" command causing items to get misplaced in wrong realms
        on move failed MoveItem* Commands in eScript.
      </change>
    </entry>
    <entry>
      <date>03-02-2009</date>
      <author>Nando</author>
      <change type="Fixed">When running out of memory, the creation of new threads is not possible. Core
        will now check if the thread was properly created to (probably) solve the symptom
        of zombie threads. The problem of not having enought memory to create thread is
        not solved, though. There will still be logs of this error.
      </change>
    </entry>
    <entry>
      <date>03-01-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Issue with Mount Objtype 0xF021 and EquipItem() ignoring setting it's Layer.</change>
      <change type="Added">Complete packethook support with Clients 6.0.1.7 and higher. This is handled via
        the earlier added Is6017 uopacket.cfg entry. This will allow you to specify a
        packethook to be triggered ONLY if the client involved is 6.0.1.7 and higher.
        It does not have to be a different packet size for this to work, only the client.
      </change>
      <change type="Added">"KR" for expansion type. This includes sending the 0x86DB with packet 0xB9.</change>
    </entry>
    <entry>
      <date>02-28-2009</date>
      <author>MuadDib</author>
      <change type="Changed">UO::DestroyItem(). Now sends a Destroy Item packet to the script controller for
        the item destroyed. This is in addition to sending in range of the item. Reason
        for this, is for Storage Containers across realms.
      </change>
      <change type="Added">New flag for uopacket.cfg of "Is6017 0/1". This is show the defined packet entry
        is explicity for a 6.0.1.7 and higher packet type. Will let you define packethooks
        for the same packet, that is different based on client version.
      </change>
      <change type="Added">Character.followers = int. This is for storage for the Followers byte in statmsg packet.</change>
      <change type="Added">ML Expansion statmsg packet support. If Expansion for account is ML or higher,
        and client version is 5.0 or higher (or is KR), sends ML Info Flag and data.
      </change>
      <change type="Added">Special Verbose messages (with POL.CFG::Verbose=1) for 6.0.5.0+ crypt seed packets
        and the UOKR 0xFF Seed Packet.
      </change>
    </entry>
    <entry>
      <date>02-27-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Clothing on corpses. COMPLETELY! This age old bug is now 100% fixed. If it was
        equipped at time of death, it will be on the corpse until the on remove script
        check for the corpse is triggered for taking the item out (on remove, not can)
      </change>
      <change type="Added">Base 6.0.1.7 and up Incoming Packet Handling ability to core.</change>
      <change type="Changed">Packets 0x3C updated for supporting clients 6.0.1.7. and newer.</change>
      <change type="Changed">Grid index support (KR and 6.0.1.7) for Drop item Packet and sending. Grid
        Index is still not set on Container Add by scripts and core yet (since this is
        only truly needed for KR support for slotted bags).
      </change>
      <change type="Changed">Updated Secure Trade Drop Item packet to support 6.0.1.7 and newer clients.</change>
      <change type="Changed">Updated sending of packet 0x25  to support 6.0.1.7 and newer clients.</change>
    </entry>
    <entry>
      <date>02-26-2009</date>
      <author>Nando</author>
      <change type="Fixed">Bug where a player / npc moving in a diagonal direction 'd' wasn't blocked by items on direction
        'd+1' and 'd-1'. (For example, moving in direction NE while having items blocking on N and E was allowed by core,
        while disallowed by client)
      </change>
    </entry>
    <entry>
      <date>02-26-2009</date>
      <author>Turley</author>
      <change type="Added">uo::CheckLosBetween( x1, y1, z1, x2, y2, z2, realm := _DEFAULT_REALM )
        Same like uo::CheckLosAt and uo::CheckLineOfSight
      </change>
    </entry>
    <entry>
      <date>02-25-2009</date>
      <author>Nando</author>
      <change type="Added">New attributes.em functions: SetAttributeLock(who, attrname, lockstate)
        and GetAttributeLock(who, attrname). With new constants: ATTRIBUTE_LOCK_UP,
        ATTRIBUTE_LOCK_DOWN, ATTRIBUTE_LOCK_LOCKED. This works for any attribute.
      </change>
    </entry>
    <entry>
      <date>02-25-2009</date>
      <author>MuadDib</author>
      <change type="Added">Support for UOKR Poisoned Status bar updates. Core will now update UOKR clients correctly
        when poisoned set to true or false for a character.
      </change>
      <change type="Changed">Packets 0x3C updated for sending UOKR Grid Index.</change>
      <change type="Added">Base UOKR Incoming Packet Handling ability to core. Will Begin adding UOKR specific packets
        such as Drop Item and so on, very soon.
      </change>

    </entry>
    <entry>
      <date>02-24-2009</date>
      <author>MuadDib</author>
      <change type="Changed">SendPacket() now returns an error if packet string passed is not valid size (Divisible by 2).</change>
      <change type="Added">SendPacket() buffer size now allows max packet size. No more need to worry bout length.</change>
      <change type="Fixed">Issue where equipped spellbooks would not open to the correct bookmarked page when opened.</change>
      <change type="Added">Support of 0x25 Packet (Send item in container) with Client version >= 6.0.1.7.</change>
      <change type="Added">Support for Grid Index with Trade Container Packet sending.</change>
    </entry>
    <entry>
      <date>02-22-2009</date>
      <author>MuadDib</author>
      <change type="Changed">Updating of worn items will be handled by sending Delete Item packet to those
        in range, then sending the worn item packets. This is to address an issue with
        client not updating worn items on other players when graphics.color.etc are changed.
      </change>
      <change type="Removed">Saving of base AOS Resistances to pcs.txt. This is not truly needed, as core will handle
        updating these live based on the armor etc. resist mods only thing needing saved now at
        this point. Just like AR. Same with Items.
      </change>
    </entry>
    <entry>
      <date>02-22-2009</date>
      <author>Nando</author>
      <change type="Added">New servspecopt.cfg option: CoreHandledLocks, default to false. If enabled, core will
        handle the change of skill locks and stat locks from the client (setting the attribute
      locks).</change>
      <change type="Added">Every Attribute now have a lock state. Later, this lock state will
        be read/changed via eScripts methods.
      </change>
    </entry>
    <entry>
      <date>02-21-2009</date>
      <author>MuadDib</author>
      <change type="Added">Ability to use Dice strings for AOS Resistances in itemdesc.cfg entries.</change>
      <change type="Fixed">Bug allowing two players to open trade window, walk away, and continue trading. If players
        get more than 4 tiles away, it will now cancel the trade upon walking to 5th tile away.
      </change>
      <change type="Added">ServSpecOpt::AllowMovingTrade=0/1(default 0). 0 = Disable moving more than 4 tiles with
        an open trade window. If you move more than 4 tiles from who trading with, cancels trade.
      </change>
      <change type="Removed">UOClient::Listener::Statcap</change>
      <change type="Added">Character.statcap = Replaces the Listener::Statcap. Default 225 r/w<br/>
        Character.skillcap = This is for storage, of overall skillcap. Default 700 r/w<br/>
        Character.followers_max = Max followers for statmsg packet. Default 0 r/w<br/>
        Character.luck = Luck for statmsg packet. Default 0 r/w<br/>
        Character.tithing = Tithing for statmsg packet. Default 0 r/w
      </change>
      <change type="Added">Min/Max Damage added as per OSI Standards to Statmsg packet. This is done by the min and
      max of the dice roll for a weapon before any mods etc.</change>
      <change type="Fixed">Now cannot request stats for chars not visible to you, concealed from you, and over 20 tiles away.</change>
    </entry>
    <entry>
      <date>02-20-2009</date>
      <author>MuadDib</author>
      <change type="Added">Priv "plogany". Used with new startlog and stoplog commands to activate target cursor.</change>
      <change type="Changed">Built-in textcommand .startlog and .stoplog for packet logging. If character has the
        plogany priv they get a target cursor to select who to set packet logging for.
      </change>
    </entry>
    <entry>
      <date>02-18-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Fixed Physical Resist not showing correctly with AOS Resistances in Statbar in place of AR.</change>
    </entry>
  </version>

  <version name="POL098 Beta #4">
    <entry>
      <date>02-18-2009</date>
      <author>Turley</author>
      <change type="Fixed">..Boat Fix Drunken Coder syndrome?</change>
    </entry>
    <entry>
      <date>02-17-2009</date>
      <author>MuadDib</author>
      <change type="Fixed">Instances where core uses UO::ClearGottenItem() type code caused ghosted item on client
        cursor. Will require more feedback from users after publish for remaining instances
        where this still occurs (outside of ClearGottenItem()).
      </change>
    </entry>
  </version>

  <version name="POL098 Beta #3">
    <entry>
      <date>02-16-2009</date>
      <author>Turley</author>
      <change type="Fixed">Hold again part of boat multi</change>
    </entry>
    <entry>
      <date>02-07-2009</date>
      <author>Turley</author>
      <change type="Removed">SystemFindObjectBySerial() flag SYSFIND_SEARCH_STORAGE_AREAS (was obsolete since years)</change>
    </entry>
    <entry>
      <date>02-05-2009</date>
      <author>MuadDib</author>
      <change type="Added">UOClient::Listener::AOSResistances 0/1. This flag aids in deciding which version
        of Armor to send in the StatMsg packets. With this enabled, a client who uses
        an account with AOS Expansion enabled will see their Physical Resist instead
        of AR member.
      </change>
    </entry>
    <entry>
      <date>02-03-2009</date>
      <author>MuadDib</author>
      <change type="Added">Character.resist_fire_mod/resist_cold_mod/resist_energy_mod/resist_poison_mod/resist_physical_mod as R/W.</change>
      <change type="Added">Item.resist_fire_mod/resist_cold_mod/resist_energy_mod/resist_poison_mod/resist_physical_mod as R/W.</change>
      <change type="Changed">GetItemDescriptor() Handles new AOS Resistance Entries.</change>
      <change type="Added">POL Debug Port has access to Mobile/Item resist members.</change>
    </entry>
    <entry>
      <date>02-02-2009</date>
      <author>MuadDib</author>
      <change type="Added">Anytime AR will get refreshed (armor damaged, equip/unequip, etc), Resistances
        for Character will also get updated based on the items worn.
      </change>
      <change type="Noted">UO::EquipItem() and UO::EquipItemFromTemplate() trigger the same Equip Code in
        core as dropping it on your paperdoll. So should be up to date with new resistance
        code in equipping also.
      </change>
      <change type="Noted">AOS Physical Resist is NOT the same as AR. Keep that in mind, when writing syshooks
        for combat, equip scripts, spells, etc. Eventually Core Combat will differentiate
        between these based on Expansion (on which to use for a client or npc). But as of
        right now, they will always use AR for combat, etc.
      </change>
    </entry>
    <entry>
      <date>02-01-2009</date>
      <author>MuadDib</author>
      <change type="Added">Character.resist_fire/resist_cold/resist_energy/resist_poison/resist_physical members
        as R/O. All these are for is storage. No core implementation for resists is present.
        These ARE sent with the Full Stat Msg packet also, based on Expansion. These are also
        stored to pcs.txt.
      </change>
      <change type="Added">Item.resist_fire/resist_cold/resist_energy/resist_poison/resist_physical members as R/O.
        This was added at item level, to cover armor, weapons, clothing, containers, etc for
        broad spectrum use on any item class that could be equipped. Such as Quivers and Totems
        in AOS.
      </change>
      <change type="Added">NPC.resist_fire/resist_cold/resist_energy/resist_poison/resist_physical members as R/O.</change>
      <change type="Added">NPCTemplate::FireResist/ColdResist/EnergyResist/PoisonResist/PhysicalResist. These work
        just like NPCTemplate::AR. You CAN use diceroll strings for these just like AR, or a set
        number for it's amount.
      </change>
      <change type="Noted">These are only written to file if the amount is != 0.</change>
      <change type="Added">Itemdesc FireResist/ColdResist/EnergyResist/PoisonResist/PhysicalResist.</change>
    </entry>
    <entry>
      <date>01-29-2009</date>
      <author>MuadDib</author>
      <change type="Added">NPC.saveonexit 0/1. Same as for Items. When set to 0 (1 default), the NPC and all
        items contained within it's wornitems container are IGNORED during save.
      </change>
      <change type="Fixed">Parry will now only refresh the AR if a shield is equipped, as was intended.</change>
      <change type="Removed">Some ... Drunken Coder syndromes. :)</change>
    </entry>
    <entry>
      <date>01-28-2009</date>
      <author>MuadDib</author>
      <change type="Changed">Rewrote ObjCache Building. Now constructs the packet for uokr/aos once when sending
        to a group (send to in range). Previous method built this packet per client requiring
        it. Should improve handling in populated areas.
      </change>
      <change type="Fixed">Client bug where AOS Expansion accounts could not see normal magery books without
        UOFeatureEnable 0x20 bit set. Although this IS a client bug, found a way to fix this
        VERY common bug server-side. As a feature of this fix, you can now have the AOS
        features that do NOT require 0x20 (tooltips etc), AND the magery books work without
        packet hooks.
      </change>
    </entry>
    <entry>
      <date>01-28-2009</date>
      <author>Turley</author>
      <change type="Changed">Optional parameter flags:=FACE_NORMAL/FACE_FORCE added to TurnToward(),
        TurnAwayFrom(), TurnTowardLocation(), TurnAwayFromLocation()
      </change>
      <change type="Fixed">servspecopt option HiddenTurnsCount check readded in facing change</change>
      <change type="Fixed">Privilege "freemove" can now also be used for NPCs</change>
    </entry>
    <entry>
      <date>01-27-2009</date>
      <author>MuadDib</author>
      <change type="Changed">uoclient.cfg::General::Statcap is deprecated now. Please change to now use
        uoclient.cfg::Listener::Statcap. This is for the new upcoming Listener Seperate
        settings. This new step in POL will allow custom settings for clients based on the
        Listener (uoclient.cfg) they are connecting through. Upcoming changes (but not yet
        done) will include such things as UOFeatureEnable, TotalStatsAtCreation, ItemColorMask,
        and so on. This is to make it so you can configure different ports for different client
        configurations and expansions. One use of this, is to allow both 2.0.0 clients on your
        shard, AOS Clients with Tooltips, ML Clients without tooltips, and so on. The
        possibilities will be good, and really expand the support you can give with your
        scripts.
      </change>
      <change type="Fixed">Magery Books will now be viewable for AOS enabled accounts on servers that do NOT have
        the UOFeatureEnable 0x20 bitflag to enable AOS style books. This was implemented to fix
        a CLIENT BUG. But, since so many people do not seem to realize you MUST have 0x20 on for
        AOS style book handling on AOS activated accounts, we must do this. Boo to you :(
      </change>
    </entry>
    <entry>
      <date>01-27-2009</date>
      <author>Turley</author>
      <change type="Changed">math::Min/Max now accepts Array as first parameter, if given returns the biggest/lowest
        Integer/Double entry (second parameter is ignored).<br/>
        Errors: "Array empty"&amp;"No Integer/Double elements"<br/>
        Second parameter has now default value of 0
      </change>
    </entry>
    <entry>
      <date>01-25-2009</date>
      <author>MuadDib</author>
      <change type="Changed">Rewrote entire core handling of config/bannedips.cfg
        This should address a small memory leak caused by the cfg system (leak still exists
        I just changed how it is done with this file). It also will increase POL speed for
        login/account verification. Remember, the larger your bannedips.cfg, the longer it takes
        for the loginserver to verify the client IP is not banned.
      </change>
      <change type="Added">ReloadConfiguration() will cause the bannedips.cfg to get reloaded. YAY.</change>
      <change type="Added">Item.saveonexit member. Does what it says. All items default to 1. If you set this
        to 0 the item and (if container, it's contents) will NOT be saved to datafile.
      </change>
    </entry>
    <entry>
      <date>01-23</date>
      <author>Nando</author>
      <change type="Changed">polcore().bytes_sent and polcore().bytes_received are now Doubles. This will fix some
        problems with negative values after some time... (internally they are now 64 bit integers).
      </change>
      <change type="Note">Lots of small leaks fixed, and more to come. Too much to list here,
        but you will feel the difference.
      </change>
    </entry>
    <entry>
      <date>01-16</date>
      <author>Turley</author>
      <change type="Fixed">Filled PolCore().iostats.received with sense</change>
    </entry>
    <entry>
      <date>01-16</date>
      <author>Nando</author>
      <change type="Fixed">UOConvert was always reading map0.mul when uomapid is 1. It will now try to read map1.mul,
        and if not found read map0.mul. (The same for staidx1 and statics1)
      </change>
    </entry>
  </version>

  <version name="POL098 Beta #2">
    <entry>
      <date>01-07</date>
      <author>MuadDib</author>
      <change type="Added">Due to Ecompile always breaking for single file and right click compile useage when
        no absolute path is given in the ecompile.cfg, added redundant code to verify drive
        letter path in Windows environments. (aka, if you use "scripts" for include directory
        instead of "c:\pol\scripts"). This should help in most cases. (Win32 Cores only right now)
      </change>
      <change type="Noted">This works by checking if the core simply looked for "ecompile.cfg" or if it used the
        -C &lt;path to config&gt; and handled accordingly. If you pass -C &lt;path&gt; it uses that to append
        to the beginning of the dir structure in the config. Otherwise it appens the structure
        based on the location of ecompile.exe being executed (since it's looking there for the cfg).
      </change>
      <change type="Noted">In case people never realized. If you set the Evironment Variable called ECOMPILE_CFG_PATH
        to point directly to the path where ecompile.cfg is kept, Ecompile.exe will use this to
        locate your config file (Read core-changes people :D )
      </change>
      <change type="Added">ECompile.exe Flag "-E&lt;path to ecompile cfg&gt;". Correct, no space between them just like the
        -Ppath Option. This is for Windows machines. It sets/changes the ECOMPILE_CFG_PATH Environment
        Variable via the commandline so no need to add/edit it via the System Properties of the machine.
        Remember, you must be logged in with Admin rights to change Environment Variables and this won't
        show in the System Properties until Reboot. But it IS accessible WITHOUT rebooting.
      </change>
    </entry>
    <entry>
      <date>01-03</date>
      <author>MuadDib</author>
      <change type="Added">Ability to send two commands to the POL Service via SCM (Service Control Manager).
        Command 1200 is a Beep (just for Nando), and 1201 will initial POL Shutdown just like
        via Script or clicking on Stop on the POL System Tray Icon.
        More to come later.
      </change>
      <change type="Fixed">Drunken coder syndrome in the AOS Tooltip handling and oldschool Tooltip code too.</change>
      <change type="Removed">Logging/Reporting of empty Attack Request Packets. Useless information that is unreliable.</change>
      <change type="Removed">References to unused portions of POL.cfg (things no longer supported
        that was still being checked for).
      </change>
    </entry>
    <entry>
      <date>01-02</date>
      <author>Turley</author>
      <change type="Changed">Scriptname &amp; PC info in .setprop log entry "wtf, setprop w/ an error"</change>
    </entry>
    <entry>
      <date>12-26</date>
      <author>MuadDib</author>
      <change type="Added">Ecompile.exe flag -xt defined in /? output.</change>
      <change type="Added">Ecompile.exe flag -Au added. This is same as -A but to only compile Updated Src.</change>
      <change type="Added">Ecompile.exe flag -s to Display Summary if -q is not set.</change>
      <change type="Added">Ecompile.exe flag -D to create .dep files (Dependency information).</change>
    </entry>
    <entry>
      <date>12-20</date>
      <author>Turley</author>
      <change type="Added">new char member .clientver_detail returns struct of ints {major;minor;rev;patch}
        new char method .compareversion(string) returns 1 if clientversion is >= then given version string
        else 0 or error "Not enough parameters"/"Invalid parameter type"/"No client attached"
      </change>
      <change type="Added">new ssopt "ForceNewObjCachePackets" default false</change>
      <change type="Added">support for new ObjectCacheInfos introduced in 5.0.0<br/>
        old behavior: Server sends 0xBF Sub 0x10 per object ->Client response also with 0xBF Sub 0x10 per item<br/>
        new behavior: Server sends 0xDC per object -> Client response with 0xD6 (there can be more then one serial up to ~16)<br/>
        intern check is<br/>
        if ((ssopt.ForceNewObjCachePackets) || (isUOKR) || (clientversion.major>=5))<br/>
        since the client sends his clientversion not instantly the first few ObjCacheInfos are sent
        the old way (thats why the new ssopt is added)
      </change>
      <change type="Noted">since client 6.0.5.0 the clientversion is instantly known (new seed packet)</change>
      <change type="Added">support of new seed packet (>=6.0.5.0)</change>
      <change type="Noted">right now no new packet is implementend (some packetsizes have changed)</change>
    </entry>
    <entry>
      <date>12-19</date>
      <author>Turley</author>
      <change type="Changed">Extended PerformAction() it is now:<br/>
        PerformAction(character,action,framecount:=5,repeatcount:=1, backward:=ACTION_DIR_FORWARD,
        repeatflag:=ACTION_NOREPEAT, delay:=1);
      </change>
    </entry>
    <entry>
      <date>12-18</date>
      <author>MuadDib</author>
      <change type="Changed">Aux Client now sends "Connection closed" to a client that attempts to connect
        from an invalid IP according to IPMATCH settings before closing the socket.
      </change>
    </entry>
    <entry>
      <date>12-18</date>
      <author>Turley</author>
      <change type="Added">Setting for servspecopt.cfg 'PrivacyPaperdoll' Default is disabled.
        if enabled, Paperdoll gives only char name for others (See Luth 09-28)
      </change>
    </entry>
    <entry>
      <date>12-17</date>
      <author>MuadDib</author>
      <change type="Fixed">Item.layer gets reset to 0 when unequipped.</change>
      <change type="Fixed">When loading Realms, POL will shutdown if it cannot find any realms and say so.</change>
      <change type="Added">Item.tile_layer returns the Layer setting in the Tiles.cfg/Tiledata.
        This was added to always give the layer it uses, while leaving the
        internal handling both of Core and Scripts that utilize the fact of
        "if layer is set, it's equipped". This is ALWAYS set from the tile info
        at server load. So changing your tiledata, re-creating tiles.cfg will
        auto update your items.
      </change>
      <change type="Note">Item.layer gets internally reset on server load if it is equipped, via tiles.cfg entry as well.</change>
    </entry>
    <entry>
      <date>12-16</date>
      <author>MuadDib</author>
      <change type="Added">AuxSvc Configs now accept an IPMATCH entry identical to /config/servers.cfg.
        This is only an additional security feature, and not required to be in the .CFG :)
        The illegal ip will be treated by immediately closing the connection.
      </change>
    </entry>
    <entry>
      <date>12-14</date>
      <author>Nando</author>
      <change type="Fixed">Characters/Starting Location packet wasn't sending the correct characters number. This
        was causing problems when enabling the 6th &amp; 7th slot (or limiting to 1 slot). Characters
        number will now be set to Max(CharacterSlot, 5). The number of CharacterSlots shown will
        depend on the acct expansion. (If it's more than AOS, it'll send &gt; 6, else 5).
      </change>
      <change type="Added">Flags in the Characters/Starting Location packet and the Enable Features (0xB9) are
        now being set according to the CharacterSlots option in pol.cfg. It only works now
        with 1, 5, 6 and 7 slots, as this is a client limitation. You can hook the 0xB9 packet
        to change this in the future.
      </change>
    </entry>
    <entry>
      <date>12-10</date>
      <author>Nando</author>
      <change type="Removed">POL's Windows-systray-icon beep when right-clicking is now gone.</change>
      <change type="Changed">Region's internal tile zone is now 4x4 (was 32x32).</change>
    </entry>
    <entry>
      <date>12-05</date>
      <author>Luth</author>
      <change type="Fixed">A bug in Run_Script caused when a Parent script ended before the child script.</change>
    </entry>
    <entry>
      <date>10-29</date>
      <author>Luth</author>
      <change type="Changed">PrintTextAbove*() now takes one more optional parameter, journal_print, with acceptible values:<br/>
        JOURNAL_[UC_]PRINT_NAME:    In the journal, it prints the item's description / npc's name, colon, the message (POL standard)<br/>
        JOURNAL_[UC_]PRINT_YOU_SEE: In the journal, it prints "You see: " followed by the message (UO standard)
        This does not affect the text that is printed above the item, ONLY what is shown in the Journal.
      </change>
      <change type="Fixed">OnRemoveScript and OnInsertScript now called with all appropriate parameters<br/>
        program onremovescript(character, container, item, item_amount, movetype)<br/>
        program oninsertscript(character, container, movetype, inserttype, adding_item, existing_stack, amount_to_add)
      </change>

    </entry>
    <entry>
      <date>10-28</date>
      <author>Luth</author>
      <change type="Changed">Set_Script_Option() now returns the previous value that was set for that option</change>
    </entry>
    <entry>
      <date>09-28</date>
      <author>Luth</author>
      <change type="Added">npc::Face( direction );</change>
      <change type="Added">mobile.SetFacing( direction, flags := FACE_NORMAL );</change>
      <change type="Noted">mobile.facing := [0-7];  is the same as calling:  mobile.SetFacing( [0-7], FACE_NORMAL );</change>
      <change type="Added">MOVEOBJECT_IGNOREMOVALBE flag to move an object regardless of its .movable property</change>
      <change type="Fixed">Paperdolls now give all information for self, and less information for others</change>
    </entry>
  </version>

  <version name="POL098 Beta #1">
    <entry>
      <date>09-23</date>
      <author>Turley</author>
      <change type="Added">uo::PlaySoundEffectXYZ( x, y, z, effect, realm := _DEFAULT_REALM );</change>
    </entry>
    <entry>
      <date>09-17</date>
      <author>Turley</author>
      <change type="Added">uo::CreateNPCFromTemplate param override_properties can now
        contain .CProps Dictionary (key=cpropname value=cpropvalue)
      </change>
    </entry>
    <entry>
      <date>09-08</date>
      <author>Turley</author>
      <change type="Added">uo::UpdateMobile(mob)
        Sends to mobiles in visual range UpdatePlayer packet of mob, for example to
        inform of notority changes
      </change>
      <change type="Added">Packet 0xC Functions:<br/>
        uo::PlayMovingEffectEx( source, target, effect, speed, duration := 0,
        hue := 0, render := 0, fixeddirection := 0, explode := 0,
        effect3d := 0, effect3dexplode := 0, effect3dsound := 0 );<br/>
        uo::PlayMovingEffectXYZEx( srcx, srcy, srcz, dstx, dsty, dstz, realm := _DEFAULT_REALM,
        effect, speed, duration := 0, hue := 0, render := 0,
        fixeddirection := 0, explode := 0,
        effect3d := 0, effect3dexplode := 0, effect3dsound := 0 );<br/>
        uo::PlayObjectCenteredEffectEx( center, effect, speed, duration := 0, hue := 0,
        render := 0, layer := 0, effect3d := 0 );<br/>
        uo::PlayStationaryEffectEx( x, y, z, realm := _DEFAULT_REALM, effect, speed,
        duration := 0, hue := 0, render := 0,
        layer := 0, effect3d := 0 );<br/>
        layer,effect3d,effect3dexplode,effect3dsound are only interpreted by the 3D client<br/>
        (current known) render values are:<br/>
        0 no change<br/>
        1 It becomes dark<br/>
        2 It becomes bright<br/>
        3 Bright color is emphasized and dark color is converted transparently<br/>
        4 The translucency (transparency is high)<br/>
        5 The translucency (it is close to primary color)<br/>
        6 Negative positive reversal<br/>
        7 The background which is transparent negative positive reversal<br/>
        layer values are:<br/>
        0 Head<br/>
        1 RightHand<br/>
        2 LeftHand<br/>
        3 Waist<br/>
        4 LeftFoot<br/>
        5 RightFoot<br/>
        7 CenterFeet<br/>
        effect3dexplode and effect3dsound are only interpreted if explode is set
        effect3d and effect3dexplode values can be found in client/particles dir<br/>
        Examples:<br/>
        CastAnimation only seen by 3D clients:<br/>
        PlayObjectCenteredEffectEx( chr, 0, 10, 5, 0, 0, 1, 9041 ); //firesparkle on right hand<br/>
        PerformAction(chr,0xCB);  // moves with char<br/>
        Fireball with explosion and sound:<br/>
        PlayMovingEffectEx( chr,tar,0x36d4,7,0,0,0,0,1,9502,4019,0x160);
      </change>
      <change type="Changed">StatRequest 0x34 checks if target is visible to char (e.g. Injection exploit)</change>
    </entry>
    <entry>
      <date>08-29</date>
      <author>Turley</author>
      <change type="Added">uo::GetGlobalPropertyNames()</change>
      <change type="Changed">uo::FindSubstance( container, objtype, amount, makeinuse := 0 );<br/>
        to FindSubstance( container, objtype, amount, makeinuse := 0, flags := 0 );<br/>
        flags are:<br/>
        FINDSUBSTANCE_IGNORE_LOCKED : Find matches in locked containers<br/>
        FINDSUBSTANCE_ROOT_ONLY     : Do not find matches in sub-containers<br/>
        FINDSUBSTANCE_FIND_ALL      : Find all matches ignoring given amount
      </change>
      <change type="Added">new Char methods:<br/>
        .attack_once([opp])<br/>
        attacks once without modifing the swingtimer
        if no opp is given attacks current attackable opponent, else attacks given opponent (and
        but checks if opponent is attackable<br/>
        .setswingtimer(time)<br/>
        if opponent is set sets swingtimer to given ms time<br/>
        .kill([killer])<br/>
        kills character ignoring invul, if killer is set repsys:OnDamage is called
      </change>
      <change type="Added">new Char members:<br/>
        .hitchance_mod +-int in thousandth<br/>
        additive modificator of the hitchance from the attacker<br/>
        .evasionchance_mod +-int in thousandth<br/>
        subtractive modificator of the hitchance from the defender
      </change>
      <change type="Added">new privileges:<br/>
        "firewhilemoving" : swingtimer will not be reset if char is moving with projectile weapon<br/>
        "attackhidden"    : char can attack hidden opponents<br/>
        "hiddenattack"    : char can attack while hidden
      </change>
      <change type="Added">new systemhook script 'HitMiss'<br/>
        function HitMiss(attacker, defender)<br/>
        is called if hitchance check fails no overriding of corefunctions or resultcheck
      </change>
    </entry>
  </version>
</ESCRIPT>